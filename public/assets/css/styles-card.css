/* =========================================
   STYLES-CARD v7 — FLUIDO
   Layout controlado pelo styles-layout.css
   Card só cuida da vitrine interna
   ========================================= */

/* ---------- Variáveis básicas ---------- */
:root {
  --card-max-w: 560px;
  --badge-fg: #f6e7c6;
  --badge-bg: rgba(0,0,0,.40);
  --badge-bd: rgba(255,225,180,.45);
}

/* ---------- Container da seção ---------- */
#section-card {
  position: relative;
  isolation: isolate;
  background: transparent;
  min-height: 100vh;
  z-index: 10;
  /* quem centraliza pergaminho + vitrines é o styles-layout.css */
}

/* ---------- Palco do card (dentro do painel de vidro) ---------- */
#section-card .card-stage {
  position: relative;
  width: min(100%, var(--card-max-w));
  margin: 0 auto;
  padding: 32px 24px 96px; /* padding-bottom garante espaço pro botão */
  box-sizing: border-box;
  overflow: visible;
  z-index: 20;
}

/* ---------- Fundo do guia (imagem de fundo da vitrine) ---------- */
#section-card #guideBg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 18px;
  opacity: 1;
  transition: opacity .6s ease;
  z-index: 1;
}

/* Camada de conteúdo principal do card (texto, selfie etc) */
#section-card .card-shell,
#section-card .card-main,
#section-card .card-inner {
  position: relative;
  z-index: 2;
}

/* ---------- Selfie / placeholder central ---------- */
#section-card .flame-layer {
  position: relative;
  margin: 12px auto 10px;
  width: clamp(220px, 70%, 340px);
  aspect-ratio: 3 / 4;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 18px 45px rgba(0,0,0,0.7);
  border: 4px solid rgba(212,175,55,0.75);
  background: #000;
}

#section-card .flame-selfie {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center 32%;
  display: block;
}

/* ---------- Nome do participante ---------- */
#section-card .card-footer {
  position: relative;
  margin: 6px auto 4px;
  text-align: center;
  z-index: 3;
}

#section-card .card-name-badge,
#section-card #userNameSlot {
  display: inline-block;
  padding: 8px 18px;
  border-radius: 10px;
  border: 1px solid rgba(212, 175, 55, 0.65);
  background: rgba(0,0,0,0.78);
  color: #d4af37;
  font: 700 clamp(20px, 3vw, 26px)/1 "BerkshireSwash-Regular", serif;
  letter-spacing: .08em;
  text-transform: uppercase;
  text-shadow: 0 1px 3px rgba(0,0,0,.9);
  max-width: 100%;
  box-sizing: border-box;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

/* =========================================
   BOTÃO FORA DO CARD — ABAIXO DO RODAPÉ
   (sempre visível, controlado pelo fluxo normal)
   ========================================= */
#section-card .card-actions-below {
  position: relative;
  margin: 24px auto 0;
  text-align: center;
  z-index: 3;
}

#section-card #btnNext,
#section-card #btnStartJourney {
  display: inline-block;
  min-width: 200px;
  padding: 12px 32px;
  font-size: 1.1em;
  font-weight: 700;
  background: linear-gradient(to bottom, #d4af37, #b8860b);
  color: #000;
  border: 2px solid #8b5a2b;
  border-radius: 999px;
  box-shadow:
    0 6px 16px rgba(0,0,0,0.5),
    0 0 20px rgba(212,175,55,0.3);
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

#section-card #btnNext:hover,
#section-card #btnStartJourney:hover {
  transform: translateY(-2px);
  box-shadow:
    0 10px 22px rgba(0,0,0,0.6),
    0 0 30px gold;
}

#section-card #btnNext:active,
#section-card #btnStartJourney:active {
  transform: translateY(1px);
  box-shadow:
    0 4px 12px rgba(0,0,0,0.6),
    0 0 18px rgba(212,175,55,0.5);
}

/* Esconde botões antigos dentro do card, se existirem */
#section-card .card-actions,
#section-card .card-selfie-slot,
#section-card .selfie-placeholder,
#section-card .card-selfie-placeholder {
  display: none !important;
}

/* Também escondemos avatares antigos de guia, se ainda houver */
#section-card .guide-avatar,
#section-card .guide-photo,
#section-card .card-guide-photo,
#section-card .avatar-guide,
#section-card img[src*="placeholder-guide"],
#section-card .guide-header {
  display: none !important;
}

/* =========================================
   MOBILE (≤ 600px)
   ========================================= */
@media (max-width: 600px) {

  #section-card {
    min-height: 100vh;
    height: auto;
    padding: 20px 0 30px;
    overflow: visible;
  }

  #section-card .card-stage {
    width: 88vw;
    max-width: 360px;
    padding: 24px 16px 80px; /* bottom um pouco menor, mobile é mais alto */
  }

  #section-card .flame-layer {
    width: clamp(180px, 70%, 260px);
    border-radius: 22px;
    border-width: 5px;
  }

  #section-card .card-footer {
    margin-top: 8px;
  }

  #section-card #btnNext,
  #section-card #btnStartJourney {
    min-width: 220px;
    max-width: 92vw;
    padding: 16px 32px;
    font-size: 1.1em;
  }
}

/* =========================================
   DESKTOP INTERMEDIÁRIO (601px – 899px)
   ========================================= */
@media (min-width: 601px) and (max-width: 899px) {

  #section-card .card-stage {
    width: min(92%, 480px);
    padding: 28px 20px 90px;
  }

  #section-card .flame-layer {
    width: clamp(220px, 65%, 320px);
  }
}

/* =========================================
   DESKTOP GRANDE (≥ 900px)
   ========================================= */
@media (min-width: 900px) {

  #section-card .card-stage {
    width: min(100%, var(--card-max-w));
  }

  #section-card .flame-layer {
    width: clamp(260px, 70%, 360px);
  }

  #section-card .card-actions-below {
    margin-top: 28px;
  }
}
