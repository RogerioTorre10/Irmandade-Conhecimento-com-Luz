/* =========================================================
   STYLES-LAYOUT — LAYOUT UNIFICADO DAS SEÇÕES DA JORNADA
   Intro, Termos 1, Termos 2, Senha, Guia, Selfie, Card,
   Perguntas, Final
   ========================================================= */

/* ---------------------------------------------------------
   1) CENTRALIZAÇÃO BASE (vale para todas as seções verticais)
   --------------------------------------------------------- */

#section-intro .j-perg-v-inner,
#section-termos1 .j-perg-v-inner,
#section-termos2 .j-perg-v-inner,
#section-senha  .j-perg-v-inner,
#section-guia   .j-perg-v-inner,
#section-selfie .j-perg-v-inner,
#section-csrd .j-perg-v-inner,
#section-perguntas .j-perg-v-inner,
#section-final  .j-perg-v-inner {
  margin-left: auto;
  margin-right: auto;
  max-width: 850px;
  width: 100%;
  position: relative;
}

#section-intro .j-panel-glow,
#section-termos1 .j-panel-glow,
#section-termos2 .j-panel-glow,
#section-senha  .j-panel-glow,
#section-guia   .j-panel-glow,
#section-selfie .j-panel-glow,
#section-card .j-panel-glow,
#section-perguntas .j-panel-glow,
#section-final  .j-panel-glow {
  margin-left: auto;
  margin-right: auto;
}

/* Pergaminho base (onde estiver usando a classe .pergaminho) */
.pergaminho {
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
  background-size: 100% auto !important;
  background-repeat: no-repeat;
  background-position: top center;
}

/* =========================================================
   2) DESKTOP (>= 900px)
   Pergaminho um pouco mais baixo, card centrado
   ========================================================= */
@media (min-width: 900px) {

  #section-intro .j-perg-v-inner,
  #section-termos1 .j-perg-v-inner,
  #section-termos2 .j-perg-v-inner,
  #section-senha  .j-perg-v-inner,
  #section-guia   .j-perg-v-inner,
  #section-selfie .j-perg-v-inner,
  #section-card .j-perg-v-inner, 
  #section-perguntas .j-perg-v-inner,
  #section-final  .j-perg-v-inner {
    transform: translateY(40px);
  }

  #section-intro .j-panel-glow,
  #section-termos1 .j-panel-glow,
  #section-termos2 .j-panel-glow,
  #section-senha  .j-panel-glow,
  #section-guia   .j-panel-glow,
  #section-selfie .j-panel-glow,
  #section-card .j-panel-glow, 
  #section-perguntas .j-panel-glow,
  #section-final  .j-panel-glow {
    transform: translateY(-10px);
  }
}

/* =========================================================
   3) MOBILE BASE (<= 600px)
   Mesma largura/altura de card pra TODAS as seções
   ========================================================= */
@media (max-width: 600px) {

  #section-intro .j-panel-glow,
  #section-termos1 .j-panel-glow,
  #section-termos2 .j-panel-glow,
  #section-senha  .j-panel-glow,
  #section-guia   .j-panel-glow,
  #section-selfie .j-panel-glow,
  #section-card .j-panel-glow, 
  #section-perguntas .j-panel-glow,
  #section-final  .j-panel-glow {
    width: min(320px, 84vw);
    max-width: 320px;
    margin: 18px auto 26px;
    padding: 18px 14px 22px;
  }

  #section-intro .j-perg-v-inner,
  #section-termos1 .j-perg-v-inner,
  #section-termos2 .j-perg-v-inner,
  #section-senha  .j-perg-v-inner,
  #section-guia   .j-perg-v-inner,
  #section-selfie .j-perg-v-inner,
  #section-card .j-perg-v-inner,  
  #section-perguntas .j-perg-v-inner,
  #section-final  .j-perg-v-inner {
    transform: translateY(0); /* base neutra; overrides abaixo */
  }
}

/* =========================================================
   4) AJUSTES FINOS – MOBILE
   (valores calibrados pelos teus prints)
   ========================================================= */

/* ---- INTRO: subir um pouco mais ---- */
@media (max-width: 600px) {
  #section-intro .j-panel-glow {
    /* estava -16, subimos mais um pouco */
    transform: translate(-6px, -26px);
  }
}

/* ---- TERMOS 1 e TERMOS 2: sobem um pouco mais ainda ---- */
@media (max-width: 600px) {
  #section-termos1 .j-panel-glow,
  #section-termos2 .j-panel-glow {
    /* estava -26, agora um pouco mais alto */
    transform: translate(-6px, -32px);
  }
}

/* ---- SENHA: sobe e centraliza melhor ---- */
@media (max-width: 600px) {

  /* pergaminho estava levemente deslocado; mantemos o X,
     mas alinhamos um pouco mais no Y */
  #section-senha .j-perg-v-inner {
    transform: translate(-10px, -4px);
  }

  #section-senha .j-panel-glow {
    /* sobe mais um pouquinho em relação ao -24 anterior */
    transform: translate(-4px, -32px);
  }
}

/* ---- GUIA: card com nome/inputs – segue padrão alto e central ---- */
@media (max-width: 600px) {
  #section-guia .j-panel-glow {
    transform: translate(-6px, -30px);
  }
}

/* ---- SELFIE: geralmente o conteúdo é mais alto, mas
       mantemos alinhado com o mesmo eixo do pergaminho ---- */
@media (max-width: 600px) {
  #section-selfie .j-panel-glow {
    transform: translate(-6px, -30px);
  }
}

/* ---- PERGUNTAS: card com perguntas – um pouco mais central ---- */
@media (max-width: 600px) {
  #section-perguntas .j-panel-glow {
    transform: translate(-6px, -30px);
  }
}

/* ---- FINAL: tela de encerramento – segue mesmo eixo ---- */
@media (max-width: 600px) {
  #section-final .j-panel-glow {
    transform: translate(-6px, -30px);
  }
}

/* =========================================================
   AJUSTE FINO – LAYOUT DA PÁGINA SENHA (DESKTOP)
   (um pouco mais alta dentro do pergaminho)
   ========================================================= */
@media (min-width: 900px) {

  /* Pergaminho de fundo da senha */
  #section-senha .j-perg-v-inner {
    position: relative !important;
    transform: translateY(40px) !important; /* antes 80px */
    top: 40px !important;                   /* antes 80px */
    margin-top: 0 !important;
    padding-top: 0 !important;
    overflow: visible !important;
    z-index: 5 !important;
  }

  /* Card (vidro) da senha */
  #section-senha .j-panel-glow {
    position: relative !important;
    transform: translate(-16px, -70px) !important; /* antes 40px */
    top: 10px !important;                   /* antes 40px */
    margin-top: 0 !important;
    width: 90% !important;
    max-width: 470px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    z-index: 6 !important;
  }
}


/* =========================================================
   AJUSTE SELFIE – ALINHAR COM INTRO / TERMOS / SENHA (DESKTOP)
   ========================================================= */
@media (min-width: 900px) {

  /* Pergaminho de fundo da página Selfie */
  #section-selfie .j-perg-v-inner {
    position: relative !important;
    transform: translate(-14px, -90px) !important; /* sobe o bloco dentro do pergaminho */
    margin-top: 0 !important;
    padding-top: 0 !important;
    overflow: visible !important;
    z-index: 5 !important;
  }

  /* Vidro (card) da Selfie */
  #section-selfie .j-panel-glow {
    position: relative !important;
    transform: translate(-14px, -90px) !important; /* acompanha o pergaminho */
    margin-top: 0 !important;
    width: 90% !important;
    max-width: 470px !important;
    margin-left: auto !important;
    margin-right: auto !important;

    z-index: 6 !important;
  }
}

/* =========================================
   GUIA – alinhar botões no vidro (desktop)
   ========================================= */
@media (min-width: 900px) {

 #section-guia .guia-options,
  #section-guia .guia-buttons-row,
  #section-guia .card-actions {
    display: flex;
    justify-content: center;
    gap: 10px;                  /* espaço igual entre eles */
    padding: 0 18px 18px 
    justify-content: space-between;
    align-items: center;
    width: 100%;
    box-sizing: border-box;
  }

  /* Cada botão ocupa ~1/3 e não “vaza” pra fora do card */
  #section-guia .guia-options button,
  #section-guia .guia-buttons-row button,
  #section-guia .card-actions .btn {
    flex: 1 1 0;
    max-width: 32%;
    margin: 0 !important;
    box-sizing: border-box;
  }   
}
/* =========================================
   PAGE CARD – REMOVER O PERGAMINHO GLOBAL
   ========================================= */

/* 1) Isola o fundo global dentro do card */
#section-card,
#section-card * {
  background-image: none !important;
  background: transparent !important;
}

/* 2) Mas NÃO mexe no próprio CARD (mantém intacto) */
#section-card .card-frame,
#section-card .card-shell,
#section-card .card-stage,
#section-card .card-wrapper,
#section-card .card-container {
  background: transparent !important;
}

/* 3) Impede qualquer pseudo-elemento global de aparecer */
#section-card::before,
#section-card::after,
#section-card *::before,
#section-card *::after {
  content: none !important;
}

/* =========================================
   PAGE CARD – LAYOUT & REMOVER O PERGAMINHO GLOBAL
   ========================================= */

/* 0) Card-stage com espaço garantido pro botão (desktop + base) */
#section-card .card-stage {
  position: relative;
  width: 100%;
  max-width: 560px;
  margin: 0 auto;
  padding-bottom: 220px; /* espaço pro nome + botão fora do card */
  overflow: visible;
}

/* 4) Placeholder + selfie em posição RELATIVA (sem top: 380px) */

#section-card .placeholder-wrapper {
  width: 100%;
  max-width: 260px;
  margin: -40px auto 12px; /* sobe um pouco, e já abre espaço pro nome */
  position: relative;
  z-index: 40;
}

#section-card .flame-layer {
  width: 100%;
  aspect-ratio: 3 / 4;
  border-radius: 14px;
  overflow: hidden;
  pointer-events: none;
}

/* Campo do nome logo abaixo do placeholder – controlado pelo fluxo normal */
#section-card .card-name-wrapper {
  width: 100%;
  max-width: 320px;
  margin: 0 auto 12px;
}

/* Botão continuar sempre abaixo do nome, dentro da seção */
#section-card .card-actions {
  margin-top: 8px;
  display: flex;
  justify-content: center;
}

/* Mobile: ajusta o palco, mas mantém a lógica */
@media (max-width: 600px) {
  #section-card .card-stage {
    max-width: 380px;
    padding-bottom: 200px;
  }

  #section-card .placeholder-wrapper {
    max-width: 240px;
    margin-top: -20px;
  }
}

/* =========================================
   DNA DE LUZ DOS GUIAS – CORES GLOBAIS
   ========================================= */

/* fallback (antes de escolher guia) */
:root {
  --theme-main-color: #ffd874;
  --theme-main-color-soft: rgba(255, 216, 116, 0.25);
}

/* LUMEN – verde dourado */
[data-guide="lumen"] {
  --theme-main-color: #9dff7a;
  --theme-main-color-soft: rgba(157, 255, 122, 0.25);
}

/* ZION – azul dourado */
[data-guide="zion"] {
  --theme-main-color: #7ed8ff;
  --theme-main-color-soft: rgba(126, 216, 255, 0.25);
}

/* ARIAN – magenta dourado */
[data-guide="arian"] {
  --theme-main-color: #ff94ff;
  --theme-main-color-soft: rgba(255, 148, 255, 0.25);
}

/* =========================================
   BOTÕES TEMÁTICOS (perguntas, continuar, etc.)
   ========================================= */

.btn-theme,
.btn.btn-stone-theme,
#section-perguntas .perguntas-actions .btn {
  background: var(--theme-main-color, #ffd874);
  border-color: var(--theme-main-color, #ffd874);
  box-shadow:
    0 0 10px var(--theme-main-color-soft, rgba(255,216,116,0.25)),
    0 0 24px var(--theme-main-color-soft, rgba(255,216,116,0.25));
  transition:
    transform 0.12s ease-out,
    box-shadow 0.18s ease-out,
    background 0.18s ease-out;
}

.btn-theme:hover,
.btn.btn-stone-theme:hover,
#section-perguntas .perguntas-actions .btn:hover {
  transform: translateY(-1px) scale(1.02);
  box-shadow:
    0 0 14px var(--theme-main-color-soft, rgba(255,216,116,0.45)),
    0 0 30px var(--theme-main-color-soft, rgba(255,216,116,0.45));
}

/* =========================================
   REGUAS / MÉTRICAS – TOPO E BASE
   ========================================= */

/* selo 1/14, ícone de pergaminho etc. */
#section-perguntas .perguntas-counter-top,
#section-perguntas .perguntas-counter-badge {
  color: #fff;
  text-shadow: 0 0 8px var(--theme-main-color-soft, rgba(255,216,116,0.6));
}

/* barra principal de progresso */
#section-perguntas .perg-progress-outer {
  position: relative;
  width: 100%;
  max-width: 220px;
  height: 10px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  overflow: hidden;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
}

/* preenchimento da barra (JS aumenta width) */
#section-perguntas .perg-progress-inner {
  height: 100%;
  width: 0%;
  background: linear-gradient(
    90deg,
    var(--theme-main-color, #ffd874),
    #ffffff
  );
  box-shadow: 0 0 14px var(--theme-main-color-soft, rgba(255,216,116,0.6));
  transition: width 0.35s ease-out;
}

/* CARD DAS PERGUNTAS ILUMINADO PELA COR DO GUIA */
#section-perguntas .j-arcane-card {
  box-shadow:
    0 0 24px var(--theme-main-color-soft, rgba(255,216,116,0.35)),
    0 0 60px rgba(0, 0, 0, 0.8);
}

/* título da pergunta */
#section-perguntas .perguntas-titulo {
  color: #fff;
  text-shadow: 0 0 10px var(--theme-main-color-soft, rgba(255,216,116,0.8));
}

/* ===============================
   LAYOUT PERGUNTAS – DESKTOP BASE
   =============================== */

#section-perguntas .perguntas-panel {
  padding: 24px 0;
}

#section-perguntas .j-perg-v-inner {
  padding: 18px 14px;
}

#section-perguntas .perguntas-wrap {
  display: flex;
  justify-content: center;
  align-items: stretch;
}

#section-perguntas .jp-block {
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
}

/* TOPO – AMPULHETA + BLOCO */
#section-perguntas .progress-total {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 6px;
  font-size: 0.85rem;
  margin-bottom: 4px;
}

#section-perguntas .progress-top {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
}

#section-perguntas .progress-label {
  font-size: 0.85rem;
  color: #f6e7c6;
}

/* BARRAS GENÉRICAS */
#section-perguntas .progress-bar {
  flex: 1;
  height: 8px;
  border-radius: 999px;
  overflow: hidden;
  background: rgba(0,0,0,0.45);
  box-shadow: inset 0 0 4px rgba(0,0,0,0.7);
}

#section-perguntas .progress-bar.gold {
  background: rgba(60, 40, 0, 0.75);
}

#section-perguntas .progress-bar.silver {
  background: rgba(50, 50, 50, 0.8);
}

#section-perguntas .progress-fill {
  width: 0%;
  height: 100%;
  transition: width 0.35s ease;
}

#section-perguntas .progress-value {
  font-size: 0.8rem;
  color: #fff;
  white-space: nowrap;
}

/* PERGAMINHO DA PERGUNTA */
#section-perguntas .perguntas-pergaminho {
  margin-top: 4px;
  padding: 10px 6px 8px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

#section-perguntas .jp-question-typed {
  font-size: 1rem;
  color: #fff;
  min-height: 40px;
}

/* FRAME & TEXTAREA */
#section-perguntas .jp-answer-frame {
  position: relative;
  padding: 14px 10px;
}

#section-perguntas .jp-answer-bg {
  position: absolute;
  inset: 0;
  background: url('/assets/img/pergaminho-rasgado-horiz.png') center/cover no-repeat;
  opacity: 0.9;
  pointer-events: none;
}

#section-perguntas .jp-answer-input {
  position: relative;
  width: 100%;
  min-height: 120px;
  background: rgba(0,0,0,0.9);
  color: #fff;
  border-radius: 8px;
  border: 2px solid #4a3b2b;
  padding: 10px 12px;
  resize: none;
  font-size: 0.95rem;
  box-sizing: border-box;
}

/* PROGRESSO DO MEIO */
#section-perguntas .progress-middle {
  display: flex;
  align-items: center;
  gap: 6px;
}

/* BOTÕES */
#section-perguntas .perguntas-controls {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  margin-top: 6px;
}

#section-perguntas .btn-perguntas {
  flex: 1;
  padding: 8px 10px;
  font-size: 0.9rem;
  border-radius: 999px;
  border: 2px solid #3b2d1a;
  background-image: url('/assets/img/textura-de-pedra.jpg');
  background-size: cover;
  background-position: center;
  color: #f6e7c6;
  text-shadow: 0 0 4px rgba(0,0,0,0.7);
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

#section-perguntas .btn-perguntas:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.6);
}

#section-perguntas .btn-perguntas.btn-confirm {
  font-weight: bold;
}

/* MOBILE */
@media (max-width: 600px) {
  #section-perguntas .j-perg-v-inner {
    padding: 12px 8px;
  }

  #section-perguntas .progress-top {
    flex-direction: column;
    align-items: flex-start;
  }

  #section-perguntas .progress-middle {
    flex-direction: column;
    align-items: flex-start;
  }

  #section-perguntas .perguntas-controls {
    flex-direction: column;
  }
}

/* LUMEN (verde) */
body.guia-lumen #section-perguntas .progress-fill {
  background: #39eaa9;
  box-shadow: 0 0 12px rgba(57,234,169,0.9);
}

/* ZION (dourado) */
body.guia-zion #section-perguntas .progress-fill {
  background: #ffd166;
  box-shadow: 0 0 12px rgba(255,209,102,0.9);
}

/* ARIAN (magenta) */
body.guia-arion #section-perguntas .progress-fill {
  background: #ff6ad5;
  box-shadow: 0 0 12px rgba(255,106,213,0.9);
}

/* ===========================
   TEMA POR GUIA — PERGUNTAS
   =========================== */

body.guia-lumen #section-perguntas .perguntas-progress-fill,
body.guia-lumen #section-perguntas .btn.btn-primary,
body.guia-lumen #section-perguntas .btn.btn-stone {
  background: #38d996 !important;        /* verde Lumen */
  box-shadow: 0 0 12px rgba(56,217,150,0.8) !important;
  border-color: #2ea87a !important;
}

body.guia-zion #section-perguntas .perguntas-progress-fill,
body.guia-zion #section-perguntas .btn.btn-primary,
body.guia-zion #section-perguntas .btn.btn-stone {
  background: #ffd166 !important;        /* dourado Zion */
  box-shadow: 0 0 12px rgba(255,209,102,0.8) !important;
  border-color: #e5b93c !important;
}

body.guia-arion #section-perguntas .perguntas-progress-fill,
body.guia-arion #section-perguntas .btn.btn-primary,
body.guia-arion #section-perguntas .btn.btn-stone {
  background: #ff6ad5 !important;        /* magenta Arion */
  box-shadow: 0 0 12px rgba(255,106,213,0.8) !important;
  border-color: #e04ab3 !important;
}

/* =========================================
   SECTION-FINAL — BASE CORRIGIDA
   ========================================= */
@media (min-width: 900px) {
   
    /* Painel final alinhado com o resto, mas um pouco mais pra cima */
  #section-final {
  padding-top: 32px !important;
  padding-bottom: 120px !important;
  position: relative;
  min-height: 100vh;
  height: auto;
  margin: 0 !important;
  padding: 0 !important;
  overflow-x: hidden !important;
}

#section-final .final-pergaminho-wrapper {
  position: relative;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  padding-top: 40px;
  padding-bottom: 120px; 
  padding: 32px 16px 120px;
  box-sizing: border-box;
}

#section-final .final-panel {
  margin: 0 auto !important;
}

/* trava scroll apenas quando FINAL ativa */
body.final-lock {
  overflow: hidden !important;
  overflow-y: hidden;
}

#section-final .final-acoes #btnVoltarInicio {
  background: rgba(0, 0, 0, 0.65);
  color: #f6e7c6;
  border: 2px solid #d4af37;
  backdrop-filter: blur(6px);
  box-shadow:
    0 0 18px rgba(212,175,55,0.7),
    inset 0 0 10px rgba(255,215,160,0.25);
  opacity: 0.9;
  transition: all .35s ease;
}

#section-final .final-acoes #btnVoltarInicio:hover {
  opacity: 1;
  box-shadow:
    0 0 26px rgba(212,175,55,0.95),
    inset 0 0 14px rgba(255,235,190,0.45);
}

  #section-final .j-panel-glow {
    width: min(480px, 92vw) !important;
    margin: 0 auto !important;
    padding: 32px 24px 40px !important;
    border-radius: 26px;
    box-sizing: border-box; 
    background:
      radial-gradient(circle at 20% 0%, rgba(255,255,255,0.12), transparent 55%),
      rgba(0,0,0,0.65);
    box-shadow:
      0 18px 40px rgba(0,0,0,0.78),
      0 0 60px rgba(0,0,0,0.85);
    left: 50%
    position: relative !important;
    top: -24px;                  /* sobe um pouco o painel */
    transform: translateX(-50%);
  }
}

/* =========================================
   SECTION-FINAL — MOBILE CENTRAL 100%
   (override hard)
   ========================================= */
@media (max-width: 600px) {

  /* O próprio section-final vira um flex centralizado */
  #section-final {
    display: flex !important;
    justify-content: center !important;
    align-items: flex-start !important;
    padding-top: 20px !important;
    padding-bottom: 120px !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    box-sizing: border-box !important;
  }

  /* Wrapper interno ocupando a largura toda e centralizando filhos */
  #section-final .final-pergaminho-wrapper,
  #section-final .final-panel {
    width: 100% !important;
    max-width: 100% !important; 
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    justify-content: center !important;
    margin: 0 auto !important;
    padding: 0 !important;      /* só em cima e embaixo */
    box-sizing: border-box !important;
  }

  /* Painel de vidro com glow: CENTRAL NA MARRETADA */
  #section-final .j-panel-glow {
    position: relative !important;
    width: 86vw !important;
    max-width: 460px !important;
    margin: 0 !important;
    margin-left: auto !important;
    margin-right: auto !important;
    margin-top: -20px !important; 
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
    box-sizing: border-box !important;
    padding: 24px 18px 32px !important;
    border-radius: 22px !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    overflow-x: hidden !important; 
  }

  /* Pergaminho interno também centralizado */
  #section-final .j-perg-v-inner {
    position: relative !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 auto !important;
    margin-left: auto !important;
    margin-right: auto !important; 
    margin-top: -20px !important; 
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
    overflow-x: hidden !important; 
    }
}
/* ===============================
   ANTI-RISCO LATERAL (MOBILE)
   =============================== */
@media (max-width: 600px) {
  html,
  body {
     width: 100%;
    overflow-x: hidden !important;
    position: relative;
  }

  #section-final {
    overflow-x: hidden !important;  /* garante que nada da final vaze pro lado */
  }
   
    *, *::before, *::after {
    max-width: 100vw !important;
    box-sizing: border-box !important;
  }
}

