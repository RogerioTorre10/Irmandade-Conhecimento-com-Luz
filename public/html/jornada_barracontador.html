<section id="section-barra" data-section class="jornada-conteudo section-hidden" aria-hidden="true">
  <header>
    <h2>📊 Jornada Barra Contador</h2>
    <p>Versão com foco em progresso e contagem de etapas.</p>
    <div id="progressContainer" style="background:#333; border-radius:8px; overflow:hidden; height:12px; margin:10px 0;">
      <div id="progressBar" style="background:#4caf50; width:0%; height:100%; transition:width .4s;"></div>
    </div>
  </header>

  <div class="pergunta">
    <p><strong>Pergunta 1:</strong> Você conseguiu acompanhar seu avanço até aqui?</p>
    <textarea data-pergunta="barra1" placeholder="Escreva sua resposta..."></textarea>
  </div>

  <div class="pergunta">
    <p><strong>Pergunta 2:</strong> O que acha da barra de progresso para visualizar etapas?</p>
    <textarea data-pergunta="barra2" placeholder="Escreva sua resposta..."></textarea>
  </div>
  <section id="section-barra" data-section class="pergaminho pergaminho-v section-hidden" aria-hidden="true">
  <h2>📊 Jornada Barra Contador</h2>
  <p>Versão com foco em progresso e contagem de etapas.</p>

  <div id="progressContainer" style="background:#333; border-radius:8px; overflow:hidden; height:12px; margin:10px 0;">
    <div id="progressBar" style="background:#4caf50; width:0%; height:100%; transition:width .4s;"></div>
  </div>

  <div class="pergunta">
    <p><strong>Pergunta 1:</strong> Você conseguiu acompanhar seu avanço até aqui?</p>
    <textarea data-pergunta="barra1" placeholder="Escreva sua resposta..."></textarea>
  </div>

  <div class="pergunta">
    <p><strong>Pergunta 2:</strong> O que acha da barra de progresso para visualizar etapas?</p>
    <textarea data-pergunta="barra2" placeholder="Escreva sua resposta..."></textarea>
  </div>

  <footer>
    <button id="btnVoltarIntroBarra" class="btn">⏪ Voltar</button>
    <button id="btnProximaBarra" class="btn btn-primary">⏩ Próxima</button>
  </footer>

  <script>
    const progressBar = document.getElementById('progressBar');
    const textareas = document.querySelectorAll('#section-barra textarea');

    function updateProgressBar() {
      const total = textareas.length;
      const respondidas = Array.from(textareas).filter(t => t.value.trim() !== '').length;
      progressBar.style.width = Math.round((respondidas / total) * 100) + '%';
    }

    function saveRespostas() {
      const respostas = JSON.parse(localStorage.getItem('jornada_respostas') || '{}');
      textareas.forEach(t => respostas[t.dataset.pergunta] = t.value.trim());
      localStorage.setItem('jornada_respostas', JSON.stringify(respostas));
    }

    textareas.forEach(t => {
      t.addEventListener('input', () => {
        updateProgressBar();
        saveRespostas();
      });
    });

    document.getElementById('btnVoltarIntroBarra')?.addEventListener('click', () => {
      window.JC?.goNext('section-intro');
    });

    document.getElementById('btnProximaBarra')?.addEventListener('click', () => {
      window.JC?.goNext('section-olho');
    });

    updateProgressBar();
  </script>
</section>


  <footer>
    <button id="btnVoltarIntro" class="btn">⏪ Voltar</button>
    <button id="btnProxima" class="btn btn-primary">⏩ Próxima</button>
  </footer>
</section>
