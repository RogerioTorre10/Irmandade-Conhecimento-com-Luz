<link rel="stylesheet" href="/assets/css/styles-base.css">
<link rel="stylesheet" href="/assets/css/styles-selfie.css">

<section
  id="section-selfie"
  class="j-section pergaminho pergaminho-h epic selfie-page hidden"
  data-section="selfie"
  aria-labelledby="selfie-title"
  data-transition-src="/assets/videos/filme-selfie-card.mp4"
>
  <div class="conteudo-pergaminho">

    <!-- Cabeçalho -->
    <header class="selfie-header">
      <h2 id="selfie-title" data-typing="true" data-text="Tirar sua Foto" data-speed="30"></h2>
      <button id="btn-skip-selfie" class="btn btn-stone-espinhos" data-transition-src="/assets/videos/filme-selfie-card.mp4">
        Não quero foto / Iniciar
      </button>
    </header>

    <!-- Texto de orientação -->
    <div id="selfieOrientWrap">
      <p id="selfieTexto" data-speed="36"></p>
    </div>

    <!-- Controles de Zoom -->
    <div class="ranges-panel">
      <div class="range-row">
        <span class="range-label">Zoom Geral</span>
        <input id="zoomAll" type="range" min="1" max="2.5" step="0.01" value="1">
        <span class="range-val" id="zoomAllVal">1.00×</span>
      </div>
      <div class="range-row">
        <span class="range-label">Zoom Horizontal</span>
        <input id="zoomX" type="range" min="1" max="2.5" step="0.01" value="1">
        <span class="range-val" id="zoomXVal">1.00×</span>
      </div>
      <div class="range-row">
        <span class="range-label">Zoom Vertical</span>
        <input id="zoomY" type="range" min="1" max="2.5" step="0.01" value="1">
        <span class="range-val" id="zoomYVal">1.00×</span>
      </div>
    </div>

    <!-- Botões de ação -->
    <div class="btn-row">
      <button id="btn-selfie-previa" class="btn btn-stone-espinhos" disabled>Prévia/Nova Foto</button>
      <button id="startCamBtn" class="btn btn-stone-espinhos">Foto</button>
      <button id="btn-selfie-confirm" class="btn btn-stone-espinhos" disabled>Confirmar</button>
    </div>

    <!-- Preview com moldura -->
    <div class="selfie-preview-wrap">
      <div class="preview-frame">
        <img id="selfiePreview" src="/assets/img/orbe-dourado-placeholder.jpg" alt="Pré-visualização">
        <video id="selfieVideo" autoplay playsinline muted style="display:none"></video>
        <canvas id="selfieCanvas" style="display:none"></canvas>
        <img id="selfieGuide" src="/assets/img/guia-chama-selfie.png" alt="Guia">
        <img id="selfieMask" src="/assets/img/moldura-medieval-espinhos.png" alt="Moldura">
      </div>
      <small class="preview-hint">Centralize o rosto na chama dourada.</small>
    </div>

    <div id="selfie-error" class="hidden" aria-hidden="true">
      Não foi possível acessar a câmera. Verifique as permissões.
    </div>
  </div>
</section>
