<!-- /public/html/section-selfie.html -->
<link rel="stylesheet" href="/assets/css/styles-base.css">
<link rel="stylesheet" href="/assets/css/styles-selfie.css">

<section id="section-selfie" class="j-section pergaminho pergaminho-h epic selfie-page hidden"
  aria-labelledby="selfie-title"
  data-transition-src="/assets/videos/filme-selfie-card.mp4">

  <div class="conteudo-pergaminho">
    <!-- Cabeçalho -->
    <header class="selfie-header">
      <h2 id="selfie-title" class="titulo-selfie" data-typing="true"
          data-text="Tire sua Foto ✨" data-speed="28" data-cursor="true">
        Tire sua Foto ✨
      </h2>
      <p class="sub" aria-live="polite">
        Sua imagem será usada no cartão da próxima etapa.
      </p>
    </header>

    <!-- Texto orientativo com datilografia -->
    <div id="selfieTexto"
         class="texto-instrucao parchment-text lumen-typing"
         data-typing="true"
         data-speed="34"
         data-text="{{NOME}}, posicione-se em frente à câmera. Centralize o rosto dentro da chama dourada, use luz frontal e mantenha uma expressão serena. Respire fundo e sinta o momento.">
      <!-- conteúdo será preenchido pelo script -->
    </div>

    <div class="selfie-grid">
      <!-- Container com máscara e câmera -->
      <div id="selfie-container" class="selfie-container masked">
        <!-- Moldura fixa (a chama) -->
        <img id="selfie-frame" src="/assets/img/chama-card.png" alt="Moldura da Chama" />
        <!-- Vídeo ao vivo -->
        <video id="selfie-video" autoplay playsinline muted></video>
        <!-- Canvas de captura -->
        <canvas id="selfie-canvas" style="display:none;"></canvas>
        <!-- Prévia (imagem final da selfie) -->
        <img id="selfie-preview" alt="Prévia da Selfie" class="selfie-preview-img" style="display:none;" />
      </div>

      <!-- Controles laterais -->
      <aside class="selfie-controls">
        <!-- Nome do participante -->
        <div class="field-row">
          <label for="nameInput">Seu Nome</label>
          <input id="nameInput" type="text" placeholder="Digite seu nome" autocomplete="name" />
        </div>

        <!-- Ajustes de Zoom -->
        <div class="selfie-zoom">
          <label for="zoom-x">Zoom horizontal (X)</label>
          <input id="zoom-x" type="range" min="0.8" max="1.6" step="0.01" value="1">
          <label for="zoom-y">Zoom vertical (Y)</label>
          <input id="zoom-y" type="range" min="0.8" max="1.6" step="0.01" value="1">
        </div>

        <!-- Ações -->
        <div class="selfie-actions">
          <button id="btn-selfie-previa" class="btn btn-primary" type="button">Prévia</button>
          <button id="btn-selfie-refazer" class="btn btn-secondary" type="button" disabled>Não confirmar</button>
          <button id="btn-selfie-confirmar" class="btn btn-primary" type="button" disabled>Confirmar</button>
        </div>

        <!-- Mensagem de status -->
        <div id="selfie-status" class="selfie-status" aria-live="polite"></div>

        <!-- Botão de pular -->
        <div class="skip">
          <button id="btnSkipSelfie" class="btn btn-link" type="button">Pular por enquanto</button>
        </div>
      </aside>
    </div>
  </div>
</section>
