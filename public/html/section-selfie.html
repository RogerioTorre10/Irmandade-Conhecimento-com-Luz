<!-- /public/html/section-selfie.html -->
<link rel="stylesheet" href="/assets/css/styles-base.css">
<link rel="stylesheet" href="/assets/css/styles-selfie.css">

<section id="section-selfie" class="j-section pergaminho pergaminho-h epic selfie-page hidden" aria-labelledby="selfie-title">
  <div class="conteudo-pergaminho">
    <header class="selfie-header">
      <h2 id="selfie-title" class="titulo-selfie" data-typing="true" data-text="Tirar sua Foto ✨" data-speed="28" data-cursor="true">
        Tirar sua Foto ✨
      </h2>
      <p class="sub" aria-live="polite">Sua imagem vai aparecer no cartão da próxima etapa.</p>
    </header>

    <div class="selfie-grid">
      <!-- Pré-visualização / Câmera -->
      <div class="selfie-preview" aria-live="polite">
        <div class="preview-stage">
          <video id="selfieVideo" playsinline autoplay muted class="stage-video hidden"></video>
          <canvas id="selfieCanvas" class="stage-canvas hidden"></canvas>
          <img id="selfiePreview" alt="Pré‑visualização da foto" class="stage-image hidden" />
          <!-- Overlays opcionais -->
          <div class="overlay">
            <div id="guideNameSlot" class="guide-name"></div>
            <div id="userNameSlot" class="user-name"></div>
          </div>
        </div>
        <div class="preview-hints">
          <small>Use a luz frontal do seu ambiente. Centralize o rosto.</small>
        </div>
      </div>

      <!-- Controles -->
      <aside class="selfie-controls">
        <div class="field-row">
          <label for="nameInput">Seu Nome</label>
          <input id="nameInput" type="text" placeholder="Digite seu nome" autocomplete="name" />
        </div>

        <div class="controls-group">
          <div class="btn-row">
            <button id="startCamBtn" class="btn btn-primary" type="button">Ativar Câmera</button>
            <button id="stopCamBtn" class="btn btn-ghost" type="button">Parar</button>
          </div>

          <div class="btn-row">
            <label class="file-btn">
              <input id="uploadSelfie" type="file" accept="image/*" hidden />
              <span class="btn btn-secondary">Enviar Foto</span>
            </label>
            <button id="captureBtn" class="btn btn-success" type="button">Capturar</button>
            <button id="previewBtn" class="btn btn-ghost" type="button">Pré‑visualizar</button>
          </div>

          <details class="tweakers">
            <summary>Ajustes finos</summary>
            <div class="slider">
              <label for="selfieScale">Zoom</label>
              <input id="selfieScale" type="range" min="0.6" max="2.0" step="0.01" value="1" />
            </div>
            <div class="slider">
              <label for="selfieOffsetX">Deslocar X</label>
              <input id="selfieOffsetX" type="range" min="-200" max="200" step="1" value="0" />
            </div>
            <div class="slider">
              <label for="selfieOffsetY">Deslocar Y</label>
              <input id="selfieOffsetY" type="range" min="-200" max="200" step="1" value="0" />
            </div>
          </details>
        </div>

        <div class="card-next">
          <h3>Pronto para seguir?</h3>
          <p>Seu retrato vai ser usado no cartão da próxima página.</p>
          <button class="btn btn-hero" data-action="avancar" type="button">Ir para o Cartão ➜</button>
        </div>

        <div class="skip">
          <button id="btnSkipSelfie" class="btn btn-link" type="button">Pular por enquanto</button>
        </div>
      </aside>
    </div>
  </div>
</section>
