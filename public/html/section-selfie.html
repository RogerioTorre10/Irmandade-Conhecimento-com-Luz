<link rel="stylesheet" href="/assets/css/styles-base.css">
<link rel="stylesheet" href="/assets/css/styles-selfie.css">

<section
  id="section-selfie"
  class="j-section pergaminho pergaminho-h epic selfie-page hidden"
  data-section="selfie"
  aria-labelledby="selfie-title"
  data-transition-src="/assets/videos/filme-selfie-card.mp4"
>
  <div class="conteudo-pergaminho">
    
    <!-- Cabeçalho -->
    <header class="selfie-header">
      <h2
        id="selfie-title"
        class="titulo-pergaminho"
        data-typing="true"
        data-text="Tirar sua Foto ✨"
        data-speed="30"
        data-cursor="true"
      ></h2>

      <button
        id="btnSkipSelfie"
        class="btn btn-ghost-top"
        aria-label="Não quero foto / Iniciar"
        data-transition-src="/assets/videos/filme-selfie-card.mp4"
      >
        Não quero foto / Iniciar
      </button>
    </header>

    <!-- Texto orientativo -->
    <div class="moldura-orientacao">
      <div
        id="selfieTexto"
        class="texto-orientacao"
        data-text="{{NOME}}, posicione-se em frente à câmera e centralize o rosto dentro do enquadramento. Use boa luz e evite sombras."
        data-speed="36"
      ></div>
    </div>

    <!-- Controles principais -->
    <div class="selfie-controls">
      <div class="ranges">
        <label>Zoom Geral
          <input id="zoomAll" type="range" min="1" max="2.5" step="0.01" value="1" />
        </label>
        <label>Zoom Horizontal
          <input id="zoomX" type="range" min="1" max="2.5" step="0.01" value="1" />
        </label>
        <label>Zoom Vertical
          <input id="zoomY" type="range" min="1" max="2.5" step="0.01" value="1" />
        </label>
      </div>

      <div class="btn-row">
        <button id="startCamBtn" class="btn btn-stone-espinhos">Ativar Câmera</button>
        <button id="btn-selfie-previa" class="btn btn-stone-espinhos" disabled>Prévia</button>
        <button id="btn-selfie-confirm" class="btn btn-stone-espinhos" disabled>Confirmar</button>
      </div>
    </div>

    <!-- Container de vídeo e chama -->
    <div class="selfie-preview">
      <div class="flame-stage">
        <video id="selfieVideo" playsinline autoplay muted></video>
        <canvas id="selfieCanvas" class="hidden"></canvas>
        <img id="selfieMask" alt="Máscara" src="/assets/img/chama-card.png" />
      </div>
      <small class="preview-hint">Certifique-se de que o rosto está centralizado no quadro.</small>
    </div>

    <!-- Campo de nome e status -->
    <div class="selfie-nome">
      <label for="inputNome">Seu Nome</label>
      <input id="inputNome" type="text" placeholder="NOME" readonly />
    </div>

    <div id="selfie-error" class="hidden" aria-hidden="true">
      Não foi possível acessar a câmera. Verifique as permissões do navegador.
    </div>

  </div>
</section>
