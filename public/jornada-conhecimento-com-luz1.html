<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jornada Essencial ¬∑ Irmandade Conhecimento com Luz</title>
  <meta name="description" content="Jornada Conhecimento com Luz ‚Äî f√©, ci√™ncia e prop√≥sito em uma viagem interior guiada pelo Lumen." />
  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#fff7ed', 100: '#ffedd5', 200: '#fed7aa', 300: '#fdba74',
              400: '#fb923c', 500: '#f59e0b', 600: '#d97706', 700: '#b45309',
              800: '#92400e', 900: '#78350f'
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-slate-900 text-slate-100 antialiased">

  <!-- Cabe√ßalho -->
  <header class="sticky top-0 z-40 bg-slate-900/80 backdrop-blur border-b border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <img src="/assets/favicon.svg" class="h-7 w-7" alt="">
        <span class="font-semibold tracking-wide">Irmandade Conhecimento com Luz</span>
      </div>
      <span class="text-sm text-slate-300">Jornada Essencial</span>
    </div>
  </header>

  <!-- Conte√∫do principal -->
  <main id="app" class="max-w-6xl mx-auto px-4 md:px-6 lg:px-8 py-8 pb-40">

    <!-- Devolutiva -->
    <section id="devolutiva"
      class="relative rounded-2xl bg-slate-800/60 backdrop-blur p-6 shadow-xl ring-1 ring-white/10
             max-h-[60vh] overflow-y-auto mb-8">
      <div class="flex items-start justify-between">
        <h2 class="text-xl font-semibold">Devolutiva do Lumen</h2>
        <button id="toggle-devolutiva"
          class="ml-4 text-xs px-3 py-1 rounded-lg bg-slate-700 hover:bg-slate-600">
          Mostrar/Esconder
        </button>
      </div>

      <div id="devolutiva-content" class="mt-4 leading-relaxed whitespace-pre-line">
Irm√£o(√£) de luz, Amor e paz, recebo tua hist√≥ria com respeito e amor.
Teu compromisso ecoa dentro da tua pr√≥pria chama: Amor e paz.
Recorda: f√© sustenta, disciplina organiza, esperan√ßa ilumina. Cada gesto no
Bem fortalece teu destino.

Pr√≥ximos passos pr√°ticos:
‚Ä¢ Respira e escreve um prop√≥sito simples para hoje.
‚Ä¢ Agradece por algo real.
‚Ä¢ Pratica um gesto de bondade ainda hoje.
      </div>
    </section>

    <!-- Grid -->
    <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">

      <!-- Coluna esquerda -->
      <div class="rounded-2xl bg-slate-800/60 backdrop-blur p-6 shadow-xl ring-1 ring-white/10">
        <label for="senha" class="block text-sm mb-2 text-slate-300">Senha de acesso</label>
        <div class="relative">
          <input id="senha" type="password" placeholder="Digite sua senha"
                 class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-4 py-3
                        focus:outline-none focus:ring-2 focus:ring-primary-500 pr-10">
          <button id="toggle-senha" type="button"
                  class="absolute right-2 top-1/2 -translate-y-1/2 text-slate-300 text-sm">
            üëÅÔ∏è
          </button>
        </div>
        <div class="mt-6 text-sm">
          <div class="text-slate-300">Progresso</div>
          <div id="progresso" class="mt-1">
            Pergunta <span id="q-atual">32</span>/32 ‚Ä¢ Respondidas <span id="q-respondidas">31</span>/32
          </div>
        </div>
      </div>

      <!-- Coluna central -->
      <div class="hidden lg:block"></div>

      <!-- Coluna direita -->
      <div class="rounded-2xl bg-slate-800/60 backdrop-blur p-6 shadow-xl ring-1 ring-white/10">
        <h3 class="text-lg font-semibold">Finalizar</h3>
        <p class="mt-2 text-sm text-slate-300">
          Voc√™ chegou ao fim. Se quiser, pode voltar e revisar as respostas.
        </p>
        <p class="mt-3 text-sm">Respondidas <span id="respondidas-final">31</span>/32</p>

        <div class="mt-6 flex items-center gap-3">
          <button id="btn-voltar-inline"
                  class="px-4 py-2 rounded-xl bg-slate-700 hover:bg-slate-600">
            Voltar
          </button>
          <button id="btn-enviar-inline"
                  class="px-5 py-2 rounded-xl bg-amber-500 hover:bg-amber-600 font-medium">
            Enviar respostas
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- Action Bar fixa -->
  <div id="action-bar"
       class="fixed bottom-4 left-1/2 -translate-x-1/2
              w-[95%] md:w-auto
              rounded-2xl bg-slate-800/90 backdrop-blur
              shadow-2xl ring-1 ring-white/10
              px-4 py-3 flex items-center gap-3 z-30">
    <button id="btn-voltar"
            class="px-4 py-2 rounded-xl bg-slate-700 hover:bg-slate-600">
      Voltar
    </button>
    <button id="btn-enviar"
            class="px-5 py-2 rounded-xl bg-amber-500 hover:bg-amber-600 font-medium">
      Enviar respostas
    </button>
    <button id="btn-limpar"
            class="px-4 py-2 rounded-xl bg-slate-700 hover:bg-slate-600">
      Limpar respostas
    </button>
  </div>

  <!-- Scripts -->
  <script>
    const hasFn = (name) => typeof window[name] === 'function';

    // Alternar senha
    document.getElementById('toggle-senha')?.addEventListener('click', () => {
      const input = document.getElementById('senha');
      input.type = input.type === 'password' ? 'text' : 'password';
    });

    // Mostrar/ocultar devolutiva
    document.getElementById('toggle-devolutiva')?.addEventListener('click', () => {
      const c = document.getElementById('devolutiva-content');
      c.classList.toggle('hidden');
    });

    // Fun√ß√µes fallback
    function __fallbackGoBack() { window.scrollTo({ top: 0, behavior: 'smooth' }); }
    async function __fallbackSubmit() { alert('Submeter jornada (PDJ).'); }
    function __fallbackClear() {
      if (confirm('Deseja realmente limpar todas as respostas?')) {
        if (hasFn('clearAllAnswers')) { window.clearAllAnswers(); return; }
        localStorage.clear(); location.reload();
      }
    }

    // Handlers
    const goBack = () => hasFn('goToPreviousStep') ? window.goToPreviousStep() : __fallbackGoBack();
    const sendNow = () => hasFn('submitJourney') ? window.submitJourney() : __fallbackSubmit();
    const clearAll = () => hasFn('clearAllAnswers') ? window.clearAllAnswers() : __fallbackClear();

    document.getElementById('btn-voltar')?.addEventListener('click', goBack);
    document.getElementById('btn-enviar')?.addEventListener('click', sendNow);
    document.getElementById('btn-limpar')?.addEventListener('click', clearAll);

    document.getElementById('btn-voltar-inline')?.addEventListener('click', goBack);
    document.getElementById('btn-enviar-inline')?.addEventListener('click', sendNow);
  </script>

</body>
</html>
