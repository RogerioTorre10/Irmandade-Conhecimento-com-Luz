<!doctype html>
<!-- =============================================================================
  T√çTULO: JORNADA ESSENCIAL
  SUBT√çTULO: P√°gina principal da jornada "Conhecimento com Luz"
============================================================================= -->
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jornada ‚Ä¢ Irmandade Conhecimento com Luz</title>

  <!-- ===========================================================================
       T√çTULO: ESTILOS E √çCONES
       SUBT√çTULO: CSS principal + √≠cone + efeitos de chama
  ============================================================================ -->
  <link rel="stylesheet" href="/styles.css">
  <link rel="alternate icon" href="/assets/img/perfil-da-irmandade.png" type="image/png">
  <link rel="stylesheet" href="/css/chama.css">
  </head>

<body data-layout="master" data-journey="essencial">
  <!-- =========================================================================
       T√çTULO: CABE√áALHO FIXO
       SUBT√çTULO: Chama pequena + t√≠tulo da jornada
  ========================================================================= -->
  <header class="site-header flex items-center gap-3">
    <!-- üî• Chama pequena no topo -->
    <div class="chama chama-sm">
      <span></span><span></span><span></span>
    </div>
    <h1>Jornada Essencial</h1>
  </header>

  <!-- =========================================================================
       T√çTULO: SHELL EST√ÅTICO
       SUBT√çTULO: Mostra orienta√ß√µes iniciais e termo antes da jornada
  ========================================================================= -->
  <main id="page-shell" class="container">
    <header class="site-header">
      <h1>Jornada Essencial</h1>
      <p id="status">Orienta√ß√µes e Termo de Responsabilidade da Jornada.</p>
    </header>

    <div class="container">
      <a class="btn btn-primary" href="#intro">Ir para Introdu√ß√£o</a>
      <a class="btn" href="/jornadas.html">‚Üê Voltar</a>
    </div>

    <!-- Sub-main para conter o canvas -->
    <main class="container">
      <section id="jornada-canvas" class="card pergaminho" style="display:none;">
        <div class="progress-badge" id="jprog-pct">0% conclu√≠do</div>
        <div class="progress-bar"><div class="progress-bar-fill" id="jprog-fill"></div></div>
        <div id="jornada-conteudo" class="conteudo-pergaminho"></div>
      </section>
    </main>

    <footer class="site-footer">
      <small>¬© 2025 Irmandade Conhecimento com Luz</small>
    </footer>
  </main>

  <!-- =============================================================================
     T√çTULO: CANVAS DIN√ÇMICO DA JORNADA
     SUBT√çTULO: Pergaminho + Progresso + Controles + Blocos
============================================================================= -->

<!-- badge topo -->
<div class="progress-badge" id="jprog-pct">0% conclu√≠do</div>

<!-- barra de progresso global -->
<div class="progress-bar"><div class="progress-bar-fill" id="jprog-fill"></div></div>

<!-- intro/final (se usados pelo render) -->
<div id="jornada-conteudo" class="conteudo-pergaminho">
  <!-- Exemplo de texto com DATILOGRAFIA na intro (opcional): -->
  <p data-typing
     data-text="Respire. Esta jornada √© sua. Um passo de cada vez."
     data-speed="26"
     data-cursor="true"></p>
</div>

<!-- =========================
     T√çTULO: PROGRESSO LOCAL DO BLOCO
========================= -->
<div class="j-progress" style="margin-top:12px">
  <div class="j-progress__bar"><div class="j-progress__fill"></div></div>
  <div class="j-progress__meta" id="j-meta"></div>
</div>

<!-- =========================
     T√çTULO: CONTROLES
========================= -->
<div class="footer-actions" style="margin:10px 0 16px">
  <button id="btnPrev" class="btn btn-secondary">Voltar</button>
  <button id="btnNext" class="btn btn-primary">Pr√≥xima</button>
</div>

<!-- =========================
     T√çTULO: BLOCO 1
     SUBT√çTULO: defina 5 perguntas; v√≠deo toca ao concluir o bloco
========================= -->
<section class="j-bloco" data-bloco="0" data-video="/assets/video/transicao-1.mp4">
  <div class="j-pergunta" data-pergunta="0">
    <label class="pergunta-enunciado" data-type="Pergunta 1: Quem √© voc√™ neste momento da vida?"><b>Pergunta 1:</b> Quem √© voc√™ neste momento da vida?</label>
    <textarea rows="4" class="input" placeholder="Digite sua resposta..."></textarea>
</div>
 <div class="j-pergunta" data-pergunta="1">
    <label class="pergunta-enunciado" data-type="Pergunta 2: Quem √© voc√™ neste momento da vida?"><b>Pergunta 1:</b> Quem √© voc√™ neste momento da vida?</label>
    <textarea rows="4" class="input" placeholder="Digite sua resposta..."></textarea>
</div>
  <div class="j-pergunta" data-pergunta="2">
    <label class="pergunta-enunciado" data-type="Pergunta 3: Quem √© voc√™ neste momento da vida?"><b>Pergunta 1:</b> Quem √© voc√™ neste momento da vida?</label>
    <textarea rows="4" class="input" placeholder="Digite sua resposta..."></textarea>
</div>
 <div class="j-pergunta" data-pergunta="3">
    <label class="pergunta-enunciado" data-type="Pergunta 4: Quem √© voc√™ neste momento da vida?"><b>Pergunta 1:</b> Quem √© voc√™ neste momento da vida?</label>
    <textarea rows="4" class="input" placeholder="Digite sua resposta..."></textarea>
</div>
 <div class="j-pergunta" data-pergunta="4">
    <label class="pergunta-enunciado" data-type="Pergunta 5: Quem √© voc√™ neste momento da vida?"><b>Pergunta 1:</b> Quem √© voc√™ neste momento da vida?</label>
    <textarea rows="4" class="input" placeholder="Digite sua resposta..."></textarea>
</div>
</section>

<!-- =========================
     T√çTULO: BLOCO 2
========================= -->
<section class="j-bloco" data-bloco="1" data-video="/assets/video/transicao-2.mp4">
  <div class="j-pergunta" data-pergunta="0">
    <label class="pergunta-enunciado"><b>Pergunta 1:</b> O que significa f√© pra voc√™ hoje?</label>
    <textarea rows="4" class="input"></textarea>
  </div>
  <div class="j-pergunta" data-pergunta="1">
    <label class="pergunta-enunciado"><b>Pergunta 2:</b> Onde voc√™ percebe luz no cotidiano?</label>
    <textarea rows="4" class="input"></textarea>
  </div>
  <div class="j-pergunta" data-pergunta="2">
    <label class="pergunta-enunciado"><b>Pergunta 3:</b> Qual h√°bito novo voc√™ quer firmar?</label>
    <textarea rows="4" class="input"></textarea>
  </div>
  <div class="j-pergunta" data-pergunta="3">
    <label class="pergunta-enunciado"><b>Pergunta 4:</b> Qual cuidado com o pr√≥ximo voc√™ deseja praticar?</label>
    <textarea rows="4" class="input"></textarea>
  </div>
  <div class="j-pergunta" data-pergunta="4">
    <label class="pergunta-enunciado"><b>Pergunta 5:</b> Uma gratid√£o de hoje:</label>
    <textarea rows="4" class="input"></textarea>
  </div>
</section>

<!-- Repita para BLOCO 3 / 4 / 5, cada um com data-video="/assets/video/transicao-3.mp4" etc. -->

  <!-- =============================================================================
     T√çTULO: OVERLAY DE V√çDEO DE TRANSI√á√ÉO
     SUBT√çTULO: abre entre os blocos; bot√£o para pular
============================================================================= -->
<div id="videoOverlay" class="video-overlay hidden">
  <video id="videoTransicao" playsinline preload="metadata" controls
         style="max-width:90vw; max-height:80vh; background:#000"></video>
  <button id="skipVideo" class="btn btn-secondary"
          style="position:absolute; top:14px; right:14px">Pular v√≠deo</button>
</div>

  <!-- =========================================================================
       T√çTULO: CHAMAS
       SUBT√çTULO: Scripts visuais de efeito da chama
  ========================================================================= -->
  <link rel="stylesheet" href="/css/chama.css"> 

   <!-- =========================================================================
       T√çTULO: BOOTSTRAP
       SUBT√çTULO: Ativa jornada e roteia intro/perguntas/final
  ========================================================================= -->
  <script>
    (function () {
      if (typeof window.activateJornada === 'function') {
        try { window.activateJornada(); } 
        catch (e) { document.body.classList.add('jornada-active'); }
      } else {
        document.body.classList.add('jornada-active');
      }

      const route = (location.hash || '#intro').slice(1);

      if (typeof window.mount === 'function') {
        window.mount({ startAt: route });
        return;
      }

      if (!window.JORNADA_RENDER) {
        console.error('JORNADA_RENDER n√£o dispon√≠vel. Confira a ORDEM dos scripts.');
        return;
      }

      if (route === 'intro') {
        JORNADA_RENDER.renderIntro();
      } else if (route === 'perguntas') {
        JORNADA_RENDER.renderPerguntas(0);
      } else if (route === 'final') {
        JORNADA_RENDER.renderFinal();
      } else {
        JORNADA_RENDER.renderIntro();
      }
    })();
  </script>

  <!-- =========================================================================
       T√çTULO: FOOTER AMBIENTE
       SUBT√çTULO: Mostra layout/journey/path
  ========================================================================= -->
 <footer style="opacity:.6; font-size:.85rem; margin-top:2rem; text-align:center">
    <span id="envTag"></span>
  </footer>

  <script>
    document.getElementById('envTag').textContent =
      `layout=${document.body.dataset.layout || 'master'} ¬∑ journey=${document.body.dataset.journey || 'essencial'} ¬∑ path=/public`;
  </script>
  <script>
/* ==== DATILOGRAFIA (auto em conte√∫do injetado) ==== */
(function(){
  function typeWriter(el, text, speed, showCursor){
    if (!el) return;
    el.textContent = '';
    if (showCursor) el.classList.add('lumen-typing');
    let i = 0;
    (function step(){
      if (i < text.length){ el.textContent += text.charAt(i++); setTimeout(step, speed); }
      else { el.classList.add('typing-done'); }
    })();
  }
  function runTyping(root){
    (root || document).querySelectorAll('[data-typing]').forEach(el=>{
      if (el.dataset._typed) return;
      const t   = el.getAttribute('data-text') || el.textContent || '';
      const spd = parseInt(el.getAttribute('data-speed') || '26', 10);
      const cur = String(el.getAttribute('data-cursor') || 'true') === 'true';
      el.dataset._typed = '1';
      typeWriter(el, t, spd, cur);
    });
  }
  document.addEventListener('DOMContentLoaded', ()=>runTyping(document));

  // observa o #jornada-conteudo para intro/final injetados
  const target = document.getElementById('jornada-conteudo');
  if (target) {
    const obs = new MutationObserver(muts => muts.forEach(m=>runTyping(m.target)));
    obs.observe(target, { childList:true, subtree:true });
  }
})();
</script>

<!-- Estilos do cursor (se ainda n√£o tiver) -->
<style>
.lumen-typing{ white-space:pre-wrap; position:relative; }
.lumen-typing::after{ content:"‚ñå"; margin-left:2px; opacity:.75; animation:lumenBlink 1s steps(2,end) infinite; }
.lumen-typing.typing-done::after{ content:""; animation:none; }
@keyframes lumenBlink{ 50%{ opacity:0; } }
</style>

  <!-- =========================================================================
              efeito da chama
  ========================================================================= -->
  <script defer src="/jornada-chama.js"></script>
  
   <!-- =========================================================================
       T√çTULO: SCRIPTS PRINCIPAIS
       SUBT√çTULO: Configura√ß√£o + m√≥dulos + orquestradores
       NOTA: A ordem √© importante!
  ========================================================================= -->
 <!-- Config -->
<script defer src="/config.js"></script>

<!-- N√∫cleo -->
<script defer src="/jornada-utils.js"></script>
<script defer src="/jornada-core.js"></script>

<!-- M√≥dulos -->
<script defer src="/jornada-auth.js"></script>
<script defer src="/jornada-chama.js"></script>
<script defer src="/jornada-paper-qa.js"></script>
<script defer src="/jornada-typing-font.js"></script>
<script defer src="/i18n/i18n.js"></script>
<script defer src="/jornada-micro.js"></script>
<script defer src="/jornada-typing.js"></script>

<!-- Controller -->
<script defer src="/jornada-controller.js"></script>

<!-- RENDER UNIFICADO (substitui master/plus/junior anteriores) -->
<script defer src="/jornada-render.js"></script>

<!-- Bootstrap -->
<script defer src="/jornada-bootstrap.js"></script>

</body>
</html>
