<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jornada Conhecimento com Luz</title>
  <meta name="description" content="Jornada guiada com estilo pergaminho vertical e horizontal conforme a etapa.">

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link rel="stylesheet" href="/assets/css/chama.css" />

  <!-- Fonte Cardo -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cardo:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>
<style>
  /* Header + chama */
    .site-header{display:flex;align-items:center;justify-content:center;padding:16px;background:transparent}
    .chama-icone{position:relative;width:18px;height:36px;display:flex;align-items:center;margin-right:12px;z-index: 10}
    .chama-icone>*{position:static}
    .site-header h1{font-family:"ManufacturingConsent",cursive;font-size:32px;color:#fff;text-shadow:0 0 10px hsla(28,96%,60%,.7);margin:0;line-height: 1.2}

    /* Chama */
    .chama-vela{--altura:45px;--largura:30px;--pulso:1.2s;--glow:8px;--hue:28;--satur:96%;--light:58%;--op:.98;position:relative;width:var(--largura);height:var(--altura);display:inline-block;filter:drop-shadow(0 0 var(--glow) hsla(var(--hue),var(--satur),60%,.75))}
    .chama-vela.chama-md{--largura:40px;--altura:90px}
    .chama-vela.chama-lg{--largura:30px;--altura:60px}
    .chama-vela .brasa{position:absolute;left:50%;bottom:2px;transform:translateX(-50%);width:calc(var(--largura)*1.4);height:10px;border-radius:50% 50% 40% 40%;background:radial-gradient(circle at 50% 40%,hsla(var(--hue),var(--satur),95%,.95) 0%,hsla(var(--hue),var(--satur),70%,.85) 50%,transparent 80%);filter:blur(1px);animation:brasaPulse var(--pulso) ease-in-out infinite;opacity:var(--op)}
    .chama-vela .lingua{position:absolute;left:50%;bottom:2px;transform:translateX(-50%);width:calc(var(--largura)*1.0);height:calc(var(--altura)*1.0);border-radius:50% 50% 4% 4%;background:radial-gradient(ellipse at center,rgba(255,190,0,.95) 0%,rgba(255,69,0,.75) 50%,rgba(230,10,10,.3) 70%,transparent 100%);mix-blend-mode:screen;filter:blur(.7px);transform-origin:50% 100%;animation:velaWaver 1.2s ease-in-out infinite;opacity:var(--op);-webkit-mask:radial-gradient(60% 90% at 50% 4%,#000 65%,transparent 69%)}
    .chama-vela .lingua:nth-child(2){width:calc(var(--largura)*.92);height:calc(var(--altura)*.95);animation-duration:1.5s;animation-delay:.08s;filter:blur(.6px)}
    .chama-vela .lingua:nth-child(3){width:calc(var(--largura)*.78);height:calc(var(--altura)*.85);animation-duration:1.8s;animation-delay:.15s;filter:blur(.5px)}
    .chama-vela .brilho{position:absolute;left:50%;bottom:0;transform:translateX(-50%);width:calc(var(--largura)*1.7);height:calc(var(--altura)*1.5);background:radial-gradient(circle,hsla(var(--hue),var(--satur),72%,.55) 0%,transparent 70%);filter:blur(9px);mix-blend-mode:screen;animation:aura var(--pulso) ease-in-out infinite;opacity:.85;pointer-events:none}
    .chama-vela.fraca{--altura:35px;--largura:25px;--pulso:1.6s;--glow:5px;--hue:36;--satur:86%;--light:66%;--op:.70}
    .chama-vela.media{--altura:45px;--largura:30px;--pulso:1.2s;--glow:8px;--hue:28;--satur:96%;--light:58%;--op:.98}
    .chama-vela.forte{--altura:55px;--largura:35px;--pulso:.7s;--glow:11px;--hue:20;--satur:100%;--light:52%;--op:1}
    .flame-corner{position:fixed;z-index:1200;pointer-events:none}
    .flame-bottom-right{bottom:20px;right:20px}
    #chama-header .chama-vela{--largura:30px;--altura:60px}
    @keyframes velaWaver{0%,100%{transform:translateX(-50%) scaleY(1.00) skewX(0deg)}25%{transform:translateX(calc(-50% + .7px)) scaleY(1.12) skewX(1.4deg)}50%{transform:translateX(-50%) scaleY(1.20) skewX(2.2deg)}75%{transform:translateX(calc(-50% - .6px)) scaleY(1.10) skewX(1.2deg)}}
    @keyframes brasaPulse{0%,100%{transform:translateX(-50%) scale(1);opacity:.85}50%{transform:translateX(-50%) scale(1.14);opacity:1}}
    @keyframes aura{0%,100%{opacity:.75}50%{opacity:1}}
    @media (prefers-reduced-motion: reduce){.chama-vela .lingua,.chama-vela .brasa,.chama-vela .brilho{animation:none!important}}
 </style>
<body class="epic min-h-screen bg-slate-900 text-slate-100">
  <div class="language-selector">
    <select id="language-select">
      <option value="pt-BR">Português (BR)</option>
      <option value="en-US">English (US)</option>
      <option value="es-ES">Español (ES)</option>
    </select>
  </div>
  <header class="site-header">
      <div id="chama-header" class="chama-icone" aria-hidden="true">
       <div class="chama-vela chama-lg">
        <div class="brasa"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="brilho"></div>
      </div>
    </div>
    <h1>Jornada Essencial</h1>
  </header>
  <main class="container">
    <section id="jornada-canvas" class="card pergaminho pergaminho-v">
      <div id="section-conteudo" class="conteudo-pergaminho">
        <div id="aria-pergunta" class="sr-only" aria-live="polite"></div>
        <div id="jornada-content-wrapper"></div>
      </div>
    </section>
    <div id="flame-top-left" class="flame-corner flame-top-left">
      <div class="chama-vela chama-md">
        <div class="brasa"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="brilho"></div>
      </div>
    </div>
    <div id="flame-bottom-right" class="flame-corner flame-bottom-right">
      <div class="chama-vela chama-md">
        <div class="brasa"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="brilho"></div>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <small>© 2025 Irmandade Conhecimento com Luz</small>
    <div id="envTag" style="margin-top:6px;opacity:.6;font-size:18px;"></div>
  </footer>

  <!-- Scripts -->
  <script src="/assets/js/i18n.js"></script>
  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/jornada-loader.js"></script>
  <script src="/assets/js/toast-safe.js"></script>
  <script src="/assets/js/jornada-shims.js"></script>
  <script src="/assets/js/jornada-utils.js"></script>
  <script src="/assets/js/api.js"></script>
  <script src="/assets/js/jornada-core.js"></script>
  <script src="/assets/js/jornada-render.js"></script>
  <script src="/assets/js/jornada-secoes.js"></script>
  <script src="/assets/js/jornada-chama.js"></script>
  <script src="/assets/js/video-transicao.js"></script>
  <script src="/assets/js/jornada-auth.js"></script>
  <script src="/assets/js/jornada-paper-qa.js"></script>
  <script src="/assets/js/jornada-typing-bridge.js"></script>
  <script src="/assets/js/jornada-controller.js"></script>
  <script src="/assets/js/jornada-micro.js"></script>
  <script src="/assets/js/jornada-bootstrap.js"></script>
  <script src="/assets/js/section-intro.js"></script>
  <script src="/assets/js/section-termos.js"></script>
  <script src="/assets/js/section-senha.js"></script>
  
<!-- Inicialização -->
<script>
  // Função para aguardar scripts
  const waitForScripts = (callback, maxAttempts = 50, interval = 1000) => {
    let attempts = 0;
    const check = () => {
      console.log(`[Init] Verificando scripts (tentativa ${attempts + 1}/${maxAttempts})...`);
      if (typeof window.JC?.init === 'function' && typeof window.carregarEtapa === 'function') {
        console.log('[Init] Scripts prontos, executando callback');
        callback();
      } else {
        console.log('[Init] Status: JC.init', typeof window.JC?.init, 'carregarEtapa', typeof window.carregarEtapa);
        if (attempts < maxAttempts) {
          attempts++;
          setTimeout(check, interval);
        } else {
          console.error('[Init] Falha ao carregar scripts após várias tentativas');
          // Fallback para carregar termos diretamente
          if (typeof window.carregarEtapa === 'function') {
            console.log('[Init] Fallback: carregando section-termos diretamente');
            window.carregarEtapa('termos');
          } else {
            console.error('[Init] window.carregarEtapa não disponível');
            // Fallback para carregar intro
            if (typeof window.carregarEtapa === 'function') {
              window.carregarEtapa('intro');
            }
          }
        }
      }
    };
    check();
  };

  // Inicializar após o carregamento completo
  window.addEventListener('load', () => {
    console.log('[Init] Evento load disparado');
    waitForScripts(() => {
      try {
        window.JC.init();
        console.log('[Init] JC.init executado com sucesso');
      } catch (e) {
        console.error('[Init] Falha ao executar JC.init:', e);
        // Fallback para carregar termos
        if (typeof window.carregarEtapa === 'function') {
          window.carregarEtapa('termos');
          console.log('[Init] Fallback: section-termos carregada');
        } else {
          console.error('[Init] window.carregarEtapa não disponível');
        }
      }
    });
  });
</script>

<noscript>
  <p style="text-align:center; padding:12px">Ative o JavaScript para usar esta página.</p>
</noscript>
</body>
</html>
