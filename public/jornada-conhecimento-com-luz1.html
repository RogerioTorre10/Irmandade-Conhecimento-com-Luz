<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jornada Conhecimento com Luz</title>
  <meta name="description" content="Jornada guiada com estilo pergaminho vertical e horizontal conforme a etapa.">

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link rel="stylesheet" href="/assets/css/chama.css" />

  <!-- Fonte Cardo -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cardo:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>

<body class="epic min-h-screen bg-slate-900 text-slate-100">
  <div class="language-selector">
    <select id="language-select">
      <option value="pt-BR">Português (BR)</option>
      <option value="en-US">English (US)</option>
      <option value="es-ES">Español (ES)</option>
    </select>
  </div>
  <style>
    /* Garantir visibilidade das chamas */
    .chama-vela, .chama-md, .chama-lg, .brasa, .lingua, .brilho {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     position: relative;
     z-index: 10;
   }

   /* Estilizar as chamas (ajuste conforme necessário) */
    .chama-vela {
     width: 40px;
     height: 60px;
     background: none;
   }

   .brasa {
    width: 100%;
    height: 10px;
    background: #ff4500;
    border-radius: 50%;
  }

    .lingua {
     width: 20px;
     height: 30px;
     background: #ffa500;
     border-radius: 50% 50% 0 0;
     position: absolute;
     top: -20px;
     left: 50%;
     transform: translateX(-50%);
   }

     .brilho {
      width: 50px;
      height: 50px;
      background: radial-gradient(circle, rgba(255, 165, 0, 0.5), transparent);
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
    }

    /* Evitar content jumping */
     #jornada-content-wrapper {
      min-height: 80vh;
      overflow-y: scroll;
      box-sizing: border-box;
    }

     #section-termos, #termos-pg1, #termos-pg2, [data-typing="true"], .nextBtn, .prevBtn, .avancarBtn {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    </style>  
     <header class="site-header">
      <div id="chama-header" class="chama-icone" aria-hidden="true">
       <div class="chama-vela chama-lg">
        <div class="brasa"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="brilho"></div>
      </div>
    </div>
    <h1>Jornada Essencial</h1>
  </header>
  <main class="container">
    <section id="jornada-canvas" class="card pergaminho pergaminho-v">
      <div id="section-conteudo" class="conteudo-pergaminho">
        <div id="aria-pergunta" class="sr-only" aria-live="polite"></div>
        <div id="jornada-content-wrapper"></div>
      </div>
    </section>
    <div id="flame-top-left" class="flame-corner flame-top-left">
      <div class="chama-vela chama-md">
        <div class="brasa"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="brilho"></div>
      </div>
    </div>
    <div id="flame-bottom-right" class="flame-corner flame-bottom-right">
      <div class="chama-vela chama-md">
        <div class="brasa"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="lingua"></div>
        <div class="brilho"></div>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <small>© 2025 Irmandade Conhecimento com Luz</small>
    <div id="envTag" style="margin-top:6px;opacity:.6;font-size:18px;"></div>
  </footer>

  <!-- Scripts -->
  <script src="/assets/js/i18n.js"></script>
  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/jornada-loader.js"></script>
  <script src="/assets/js/toast-safe.js"></script>
  <script src="/assets/js/jornada-shims.js"></script>
  <script src="/assets/js/jornada-utils.js"></script>
  <script src="/assets/js/api.js"></script>
  <script src="/assets/js/jornada-core.js"></script>
  <script src="/assets/js/jornada-render.js"></script>
  <script src="/assets/js/jornada-secoes.js"></script>
  <script src="/assets/js/jornada-chama.js"></script>
  <script src="/assets/js/video-transicao.js"></script>
  <script src="/assets/js/jornada-auth.js"></script>
  <script src="/assets/js/jornada-paper-qa.js"></script>
  <script src="/assets/js/jornada-typing-bridge.js"></script>
  <script src="/assets/js/jornada-controller.js"></script>
  <script src="/assets/js/jornada-micro.js"></script>
  <script src="/assets/js/jornada-bootstrap.js"></script>
  <script src="/assets/js/section-intro.js"></script>
  <script src="/assets/js/section-termos.js"></script>
  <script src="/assets/js/section-senha.js"></script>
  
<!-- Inicialização -->
<script>
  // Função para aguardar scripts
  const waitForScripts = (callback, maxAttempts = 30, interval = 1000) => {
    let attempts = 0;
    const check = () => {
      console.log(`[Init] Verificando scripts (tentativa ${attempts + 1}/${maxAttempts})...`);
      if (typeof window.JC?.init === 'function' && typeof window.carregarEtapa === 'function') {
        console.log('[Init] Scripts prontos, executando callback');
        callback();
      } else if (attempts < maxAttempts) {
        attempts++;
        setTimeout(check, interval);
      } else {
        console.error('[Init] Falha ao carregar scripts após várias tentativas');
        // Fallback para carregar termos diretamente
        if (typeof window.carregarEtapa === 'function') {
          console.log('[Init] Fallback: carregando section-termos diretamente');
          window.carregarEtapa('termos');
        } else {
          console.error('[Init] window.carregarEtapa não disponível');
        }
      }
    };
    check();
  };

  // Inicializar após o carregamento completo
  window.addEventListener('load', () => {
    console.log('[Init] Evento load disparado');
    waitForScripts(() => {
      try {
        window.JC.init();
        console.log('[Init] JC.init executado com sucesso');
      } catch (e) {
        console.error('[Init] Falha ao executar JC.init:', e);
        // Fallback para carregar termos
        if (typeof window.carregarEtapa === 'function') {
          window.carregarEtapa('termos');
          console.log('[Init] Fallback: section-termos carregada');
        }
      }
    });
  });
</script>

<noscript>
  <p style="text-align:center; padding:12px">Ative o JavaScript para usar esta página.</p>
</noscript>
</body>
</html>
