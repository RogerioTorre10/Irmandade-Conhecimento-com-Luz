<!doctype html>
<!-- =============================================================================
  T√çTULO: JORNADA ESSENCIAL
  SUBT√çTULO: P√°gina principal da jornada "Conhecimento com Luz"
============================================================================= -->
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jornada ‚Ä¢ Irmandade Conhecimento com Luz</title>

  <!-- ===========================================================================
       T√çTULO: ESTILOS E √çCONES
       SUBT√çTULO: CSS principal + √≠cone + efeitos de chama
  ============================================================================ -->
  <link rel="stylesheet" href="/styles.css">
  <link rel="alternate icon" href="/assets/img/perfil-da-irmandade.png" type="image/png">
  <link rel="stylesheet" href="/css/chama.css">
</head>

<body>
  <!-- =========================================================================
       T√çTULO: CABE√áALHO FIXO
       SUBT√çTULO: Chama pequena + t√≠tulo da jornada
  ========================================================================= -->
  <header class="site-header flex items-center gap-3">
    <!-- üî• Chama pequena no topo -->
    <div class="chama chama-sm">
      <span></span><span></span><span></span>
    </div>
    <h1>Jornada Essencial</h1>
  </header>

  <!-- =========================================================================
       T√çTULO: SHELL EST√ÅTICO
       SUBT√çTULO: Mostra orienta√ß√µes iniciais e termo antes da jornada
  ========================================================================= -->
  <main id="page-shell" class="container">
    <header class="site-header">
      <h1>Jornada Essencial</h1>
      <p id="status">Orienta√ß√µes e Termo de Responsabilidade da Jornada.</p>
    </header>

    <div class="container">
      <a class="btn btn-primary" href="#intro">Ir para Introdu√ß√£o</a>
      <a class="btn" href="/jornadas.html">‚Üê Voltar</a>
    </div>

    <!-- Sub-main para conter o canvas -->
    <main class="container">
      <section id="jornada-canvas" class="card pergaminho" style="display:none;">
        <div class="progress-badge" id="jprog-pct">0% conclu√≠do</div>
        <div class="progress-bar"><div class="progress-bar-fill" id="jprog-fill"></div></div>
        <div id="jornada-conteudo" class="conteudo-pergaminho"></div>
      </section>
    </main>

    <footer class="site-footer">
      <small>¬© 2025 Irmandade Conhecimento com Luz</small>
    </footer>
  </main>

  <!-- =========================================================================
       T√çTULO: CANVAS DIN√ÇMICO DA JORNADA
       SUBT√çTULO: Onde o JS injeta intro, perguntas e final
  ========================================================================= -->
  <section id="jornada-canvas" class="card pergaminho" style="display:none;">
    <!-- badge no topo direito -->
    <div class="progress-badge" id="jprog-pct">0% conclu√≠do</div>

    <!-- barra de progresso -->
    <div class="progress-bar">
      <div class="progress-bar-fill" id="jprog-fill"></div>
    </div>

    <!-- onde as telas (intro/perguntas/final) ser√£o injetadas -->
    <div id="jornada-conteudo" class="conteudo-pergaminho"></div>
  </section>

  <!-- =========================================================================
       T√çTULO: CHAMAS
       SUBT√çTULO: Scripts visuais de efeito da chama
  ========================================================================= -->
  <link rel="stylesheet" href="/css/chama.css">
  <script defer src="/jornada-chama.js"></script>

  <!-- =========================================================================
       T√çTULO: SCRIPTS PRINCIPAIS
       SUBT√çTULO: Configura√ß√£o + m√≥dulos + orquestradores
       NOTA: A ordem √© importante!
  ========================================================================= -->

 <!-- Config -->
<script defer src="/config.js"></script>

<!-- N√∫cleo -->
<script defer src="/jornada-utils.js"></script>
<script defer src="/jornada-core.js"></script>

<!-- M√≥dulos -->
<script defer src="/jornada-auth.js"></script>
<script defer src="/jornada-chama.js"></script>
<script defer src="/jornada-paper-qa.js"></script>
<script defer src="/jornada-typing-font.js"></script>
<script defer src="/i18n/i18n.js"></script>
<script defer src="/jornada-micro.js"></script>
<script defer src="/jornada-typing.js"></script>

<!-- Controller -->
<script defer src="/jornada-controller.js"></script>

<!-- RENDER UNIFICADO (substitui master/plus/junior anteriores) -->
<script defer src="/jornada-render.js"></script>

<!-- Bootstrap -->
<script defer src="/jornada-bootstrap.js"></script>


  <!-- =========================================================================
       T√çTULO: BOOTSTRAP
       SUBT√çTULO: Ativa jornada e roteia intro/perguntas/final
  ========================================================================= -->
  <script>
    (function () {
      if (typeof window.activateJornada === 'function') {
        try { window.activateJornada(); } 
        catch (e) { document.body.classList.add('jornada-active'); }
      } else {
        document.body.classList.add('jornada-active');
      }

      const route = (location.hash || '#intro').slice(1);

      if (typeof window.mount === 'function') {
        window.mount({ startAt: route });
        return;
      }

      if (!window.JORNADA_RENDER) {
        console.error('JORNADA_RENDER n√£o dispon√≠vel. Confira a ORDEM dos scripts.');
        return;
      }

      if (route === 'intro') {
        JORNADA_RENDER.renderIntro();
      } else if (route === 'perguntas') {
        JORNADA_RENDER.renderPerguntas(0);
      } else if (route === 'final') {
        JORNADA_RENDER.renderFinal();
      } else {
        JORNADA_RENDER.renderIntro();
      }
    })();
  </script>

  <!-- =========================================================================
       T√çTULO: FOOTER AMBIENTE
       SUBT√çTULO: Mostra layout/journey/path
  ========================================================================= -->
  <footer style="opacity:.6; font-size:.85rem; margin-top:2rem; text-align:center">
    <span id="envTag"></span>
  </footer>

  <script>
    document.getElementById('envTag').textContent =
      `layout=${document.body.dataset.layout || 'master'} ¬∑ journey=${document.body.dataset.journey || 'essencial'} ¬∑ path=/public`;
  </script>

</body>
</html>
