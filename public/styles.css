/* =============================================================================
   TÍTULO: VARIÁVEIS E RESET BÁSICO
   SUBTÍTULO: Cores, raios e box-sizing global
============================================================================= */
:root { --bg:#0b1020; --fg:#eef2ff; --muted:#aab4d4; --primary:#6aa7ff; --card:#121832; --card-2:#0e1428; --radius:16px; }
*{box-sizing:border-box}
html,body{height:100%}

/* =============================================================================
   TÍTULO: FONTES ÉPICAS — IRMANDADE
   SUBTÍTULO: @font-face (caminhos em /public/assets/fonts)
   - ManufacturingConsent-Regular.ttf  → TÍTULOS e BOTÕES
   - BerkshireSwash-Regular.ttf        → TEXTO CORRIDO (contrato/orientações/perguntas)
   - Cardo-Regular/Bold/Italic.ttf     → RESPOSTAS (inputs, textarea, devolutivas)
============================================================================= */
@font-face{
  font-family:'ManufacturingConsent';
  src:url('/assets/fonts/ManufacturingConsent-Regular.ttf') format('truetype');
  font-weight:400; font-style:normal; font-display:swap;
}
@font-face{
  font-family:'BerkshireSwash';
  src:url('/assets/fonts/BerkshireSwash-Regular.ttf') format('truetype');
  font-weight:400; font-style:normal; font-display:swap;
}
@font-face{
  font-family:'Cardo';
  src:url('/assets/fonts/Cardo-Regular.ttf') format('truetype');
  font-weight:400; font-style:normal; font-display:swap;
}
@font-face{
  font-family:'Cardo';
  src:url('/assets/fonts/Cardo-Italic.ttf') format('truetype');
  font-weight:400; font-style:italic; font-display:swap;
}
@font-face{
  font-family:'Cardo';
  src:url('/assets/fonts/Cardo-Bold.ttf') format('truetype');
  font-weight:700; font-style:normal; font-display:swap;
}

/* =============================================================================
   TÍTULO: BASE TIPOGRÁFICA
   SUBTÍTULO: Body, títulos épicos e áreas de respostas
============================================================================= */
body{
  margin:0;
  font-family:'BerkshireSwash', cursive; /* texto corrido por padrão */
  background:var(--bg);
  color:var(--fg);
  line-height:1.5;
}

/* TÍTULOS ÉPICOS */
h1,h2,h3,h4,h5,h6,
.site-header h1,
.card h2,
.section-title,
.bloco-titulo,
.card-pergunta h3,
.jornada-header h1{
  font-family:'ManufacturingConsent', serif;
  letter-spacing:1px;
  text-transform:none;
  font-weight:400;
}

/* ENUNCIADOS/ORIENTAÇÕES/CONTRATO (herdam BerkshireSwash do body) */
label,
.pergunta-enunciado,
.texto-guia,
.orientacoes,
.contrato,
p{
  font-family:'BerkshireSwash', cursive;
}

/* RESPOSTAS DO USUÁRIO (inputs, textareas, devolutivas) */
input, textarea, select,
.resposta,
.jornada-resposta,
.devolutiva,
#acolh,
#jornada-conteudo textarea,
#jornada-conteudo input[type="text"],
#jornada-conteudo input[type="email"],
#jornada-conteudo input[type="number"],
#form-perguntas textarea,
#form-perguntas input[type="text"],
#form-perguntas input[type="email"],
#form-perguntas input[type="number"]{
  font-family:'Cardo', serif;
}

/* =============================================================================
   TÍTULO: ESTRUTURA GERAL
   SUBTÍTULO: Header, container, cartões e badges
============================================================================= */
.site-header,.site-footer{padding:24px 16px;text-align:center}
.container{max-width:920px;margin:0 auto;padding:16px;display:flex;flex-direction:column;gap:16px}
.motto{opacity:.8;margin-top:8px;text-align:center;letter-spacing:.1em}
.card{background:linear-gradient(180deg,var(--card),var(--card-2));padding:20px;border-radius:var(--radius);box-shadow:0 10px 30px rgba(0,0,0,.35)}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;background:rgba(106,167,255,.15);color:var(--primary);font-weight:600}
.small{font-size:.875rem;opacity:.9}
hr{border:0;border-top:1px solid rgba(255,255,255,.15);margin:16px 0}

/* =============================================================================
   TÍTULO: CAMPOS E SENHA
   SUBTÍTULO: Inputs padrão e "olho" para revelar senha
============================================================================= */
.input, textarea{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0c1330;color:var(--fg)}
label{font-weight:600;margin:6px 0 4px;display:block}

.senha-wrap{position:relative;display:flex;align-items:center}
.senha-wrap .input{padding-right:42px}
.senha-eye{
  position:absolute;right:10px;top:50%;transform:translateY(-50%);
  width:28px;height:28px;border:0;background:transparent;color:var(--muted);
  display:flex;align-items:center;justify-content:center;cursor:pointer
}
.senha-eye:hover{color:var(--fg)}
.senha-eye svg{width:20px;height:20px}

/* =============================================================================
   TÍTULO: JORNADA DINÂMICA
   SUBTÍTULO: Mostrar/ocultar canvas da jornada
============================================================================= */
body.jornada-active #page-shell,
body.jornada-active header.site-header,
body.jornada-active footer.site-footer { display:none !important; }
body.jornada-active #jornada-canvas { display:block !important; }

/* =============================================================================
   TÍTULO: PERGAMINHO
   SUBTÍTULO: fundo vertical/horizontal sem cortar
============================================================================= */
/* ==== PERGAMINHO ==== */
/* ===== RATIOS GLOBAIS ===== */
:root{
  --perg-v-ratio: 2/3;  /* vertical */
  --perg-h-ratio: 3/2;  /* horizontal */
}

/* ===== BASE DO PERGAMINHO (comum) ===== */
.pergaminho{
  background-repeat: no-repeat;
  background-position: center;
  background-size: 100% 100%;
  margin: 0 auto;
  padding: clamp(12px, 3vw, 28px);
  border-radius: 8px;
}

/* ===== VERTICAL (intro/final) ===== */
.card.pergaminho-v {
  background: url("/assets/img/pergaminho-rasgado-vert.png") no-repeat center center !important;
  background-size: 100% 100% !important;
  background-color: transparent !important;

  aspect-ratio: 2 / 3;
  height: 92vh;
  max-width: 96vw;
  margin-inline: auto;
  border-radius: 8px;
  position: relative;
  overflow: hidden;
}

/* ===== HORIZONTAL (perguntas) ===== */
.card.pergaminho-h {
  background: url("/assets/img/pergaminho-rasgado-horiz.png") no-repeat center center !important;
  background-size: 100% 100% !important;
  background-color: transparent !important;

  width: min(96vw, 1100px);
  min-height: 70vh;
  aspect-ratio: 3 / 2;
  margin-inline: auto;
  border-radius: 8px;
  position: relative;
  overflow: hidden;
}


/* Conteúdo interno do pergaminho */
.conteudo-pergaminho{
  line-height: 1.55;
}

/* Escopo só na página de jornada */
.jornada #jornada-canvas.pergaminho{ display:block; }

/* =============================================================================
   TÍTULO: VISIBILIDADE DE BLOCO E PERGUNTA
   SUBTÍTULO: controlado pelo jornada-controller.js
============================================================================= */
.j-bloco{ display:none; }
.j-pergunta{ display:none; }

/* =============================================================================
   TÍTULO: OVERLAY VÍDEO
============================================================================= */
.video-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.85);
  display:flex; align-items:center; justify-content:center; z-index:9999; }
.video-overlay.hidden{ display:none; }

/* =============================================================================
   TÍTULO: DATILOGRAFIA
============================================================================= */
.lumen-typing { white-space: pre-wrap; position: relative; }
.lumen-typing::after { content: "▌"; margin-left: 2px; opacity: .75; animation: lumenBlink 1s steps(2, end) infinite; }
.lumen-typing.typing-done::after { content: ""; animation: none; }
@keyframes lumenBlink { 50% { opacity: 0; } }

/* =============================================================================
   TÍTULO: PROGRESSO DA JORNADA
   SUBTÍTULO: Barra, preenchimento e meta
============================================================================= */
.j-progress { margin:6px 0 14px; }
.j-progress__bar { width:100%; height:10px; border-radius:999px; background:rgba(255,255,255,.14); overflow:hidden; }
.j-progress__fill{ height:100%; width:0%; transition:width .25s ease; background:linear-gradient(90deg,#f59e0b,#fde68a); }
.j-progress__meta{ margin-top:6px; font-size:.95rem; opacity:.9; display:flex; justify-content:space-between; gap:8px; }
.j-progress__meta b { font-weight:700; }

.progress-badge {
  position:absolute; top:8px; right:16px;
  background:rgba(0,0,0,0.7); color:#fff;
  font-size:.9rem; padding:4px 8px; border-radius:8px;
  font-family:'Cardo', serif; /* legível para números/percentuais */
  z-index:10;
}
.progress-bar { width:100%; height:8px; background:rgba(255,255,255,0.2); border-radius:4px; overflow:hidden; margin:10px 0; }
.progress-bar-fill { height:100%; width:0; background:linear-gradient(90deg,#ffcf70,#ff8c00); transition:width .5s ease-out; }

/* =============================================================================
   TÍTULO: NAVEGAÇÃO/LINKS
   SUBTÍTULO: Ajustes finos; tipografia herda do body (Berkshire)
============================================================================= */
nav a, a.btn, .site-header p { letter-spacing:.5px; }

/* =============================================================================
   TÍTULO: VÍDEO OVERLAY
   SUBTÍTULO: Player full-screen opcional
============================================================================= */
.video-overlay { position:fixed; inset:0; background:#000; display:flex; justify-content:center; align-items:center; z-index:9999; }
.video-overlay.hidden { display:none; }
.video-player { max-width:100%; max-height:100%; }

/* =============================================================================
   TÍTULO: SELETOR DE IDIOMA
   SUBTÍTULO: Botões de idioma
============================================================================= */
.lang-switch { display:flex; gap:6px; align-items:center; }
.lang-btn {
  font-family:'ManufacturingConsent', serif;
  font-size:.85rem; padding:.25rem .5rem; border-radius:.5rem;
  border:1px solid rgba(255,255,255,.2); background:transparent; color:#e8ecf4;
  cursor:pointer;
}
.lang-btn:hover { background:rgba(255,255,255,.1); }

/* =============================================================================
   TÍTULO: VISIBILIDADE DAS PERGUNTAS
   SUBTÍTULO: Mostra 1 pergunta por vez dentro do bloco
============================================================================= */
.j-bloco { display: none; }          /* todos os blocos começam ocultos (JS mostra o atual) */
.j-pergunta { display: none; }       /* todas perguntas ocultas (JS mostra a atual) */

/* Overlay de vídeo (já tem, reforço aqui caso precise) */
.video-overlay { position:fixed; inset:0; background:rgba(0,0,0,.85); display:flex; align-items:center; justify-content:center; z-index:9999; }
.video-overlay.hidden { display:none; }

/* ==== HOME (escopado) ==== */
.home .hero        { /* regras da faixa inicial da home */ }
.home .card.invite { /* cards de convites da home */ }
.home nav a        { /* links do topo da home se precisar */ }

/* ==== JORNADA (escopado) ==== */
.jornada #jornada-canvas.pergaminho { /* pergaminho da jornada */ }
.jornada .j-progress { /* progresso Local */ }
.jornada .footer-actions .btn { /* botões Voltar/Próxima */ }

/* ===========================
   CHAMA (CSS puro)
   =========================== */
.chama{
  position:relative; width:56px; height:80px;
  filter: drop-shadow(0 6px 14px rgba(255,140,0,.35));
  z-index: 2;
}
.chama span{
  position:absolute; inset:auto 0 0 0; margin:auto;
  width:56px; height:80px; border-radius:40px 40px 22px 22px;
  background: radial-gradient(50% 60% at 50% 30%, #fff7cc 0%, #ffd166 35%, #ff8c00 70%, transparent 100%);
  animation: chamaFlicker 1.8s ease-in-out infinite;
}
.chama span:nth-child(2){ width:36px; height:52px; bottom:14px; opacity:.85; filter: blur(.3px); }
.chama span:nth-child(3){ width:18px; height:26px; bottom:28px; opacity:.9; }

@keyframes chamaFlicker{
  0%,100%{ transform: translateY(0) scale(1); opacity:1; }
  50%{ transform: translateY(-2px) scale(1.03); opacity:.95; }
}
/* Variação pequena da chama (header) */
.chama-sm {
  transform: scale(0.6); /* reduz o tamanho */
  margin-right: 8px;     /* dá espaço antes do título */
}
/* Médio (padrão: intro/perguntas) */
.chama-md {
  transform: scale(1);
  margin: 0 auto;
}

/* Grande (final/homepage, impacto) */
.chama-lg {
  transform: scale(1.4);
  margin: 0 auto;
}
.chama span { animation: chamaFlicker 2.2s ease-in-out infinite; }

/* ===== FRAME DO PERGAMINHO (imagem + layer) ===== */
.pergaminho-frame{
  position: relative;
  width: min(96vw, 1100px);
  margin: 0 auto;
  /* se tiver .card com fundo, zera aqui dentro: */
  background: transparent !important;
}
.pergaminho-img{
  display: block;
  width: 100%;
  height: auto;
  user-select: none;
  pointer-events: none;
}
.pergaminho-layer{
  position: absolute; inset: 0;
  padding: clamp(12px, 3vw, 28px);
  overflow: auto; /* rola se o texto crescer */
}

/* Modos: vertical (intro/final) e horizontal (perguntas) */
.pergaminho-frame.v .pergaminho-img{
  content: url('/assets/img/pergaminho-rasgado-vert.png');
  aspect-ratio: 2 / 3;
}
.pergaminho-frame.h .pergaminho-img{
  content: url('/assets/img/pergaminho-rasgado-horiz.png');
  aspect-ratio: 3 / 2;
}

/* Opcional: deixa .card transparente dentro do frame */
.pergaminho-frame .card{ background: transparent !important; }

/* Espaçamento opcional para uma chama no topo da layer */
.pergaminho-layer .chama{ margin-bottom: 8px; }


