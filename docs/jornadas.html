<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jornada Conhecimento com Luz ‚Äî Essencial</title>
  <meta name="description" content="Jornada essencial: perguntas profundas, devolutiva simb√≥lica e PDF/HQ finais.">
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="stylesheet" href="css/styles-core.css">
  <link rel="stylesheet" href="css/styles-pergaminho.css">
  <link rel="stylesheet" href="css/styles-chama.css">
  <link rel="stylesheet" href="css/styles-emojis.css">
</head>
<body class="bg-grad text-surface-100">
  <main class="container mx-auto px-4 py-8 max-w-4xl">

    <!-- üîê AUTENTICA√á√ÉO (senha fixa de teste) -->
   <section id="sec-auth" class="card mb-8 hidden" style="display:none">
  <!-- Olho decorativo N√ÉO necess√°rio aqui -->
  <div class="card-body text-center pergaminho pergaminho-h">
    <h1 class="text-2xl md:text-3xl font-extrabold mb-2">Acessar Jornada</h1>
    <p class="opacity-80">Digite a senha para iniciar sua jornada.</p>

    <div class="mt-6 mx-auto max-w-sm relative">
      <!-- input com espa√ßo √† direita para o bot√£o-olho -->
      <input id="senhaInput" type="password" class="input text-center pr-12" placeholder="Senha de acesso" />

      <!-- Olho m√°gico: mostrar/ocultar senha -->
      <button id="btnToggleSenha" type="button" class="btn-eye" aria-label="Mostrar senha" title="Mostrar senha"></button>

      <p id="authError" class="mt-2 text-sm text-red-400 hidden">Senha incorreta. Tente novamente.</p>
      <button id="btnEntrar" class="btn-primary mt-4 w-full">Entrar</button>
    </div>
  </div>

      <!-- Chama √∫nica no rodap√© do card -->
      <div class="chama-wrapper">
        <div class="chama chama-grande" aria-hidden="true"></div>
        <div class="chama chama-pequena" aria-hidden="true"></div>
      </div>
    </section>

    <!-- INTRO + TERMO -->
    <section id="sec-intro" class="card mb-8 hidden">
      <div class="card-body pergaminho pergaminho-h">
        <h1 class="text-2xl md:text-3xl font-extrabold mb-4">Jornada Conhecimento com Luz ‚Äì Essencial üìò</h1>
        <ol class="list-decimal pl-6 space-y-2 opacity-90">
          <li>Suas respostas n√£o ser√£o armazenadas ap√≥s o t√©rmino.</li>
          <li>Ao final, ser√° gerado um PDF exclusivo com sua devolutiva simb√≥lica e a HQ.</li>
          <li>O PDF/HQ <b>n√£o</b> ser√£o enviados por e-mail ‚Äî fa√ßa o download imediato.</li>
          <li>Ap√≥s a entrega, todos os dados ser√£o apagados automaticamente.</li>
          <li>Acesso por senha individual com validade: 15 dias para iniciar; 24h para concluir.</li>
        </ol>

        <h2 class="mt-6 font-bold text-xl">Termo de Compromisso</h2>
        <ul class="list-disc pl-6 space-y-1 mt-2 text-sm md:text-base opacity-90">
          <li>Minhas respostas s√£o de minha responsabilidade e express√£o pessoal.</li>
          <li>As respostas s√£o usadas apenas para gerar minha devolutiva simb√≥lica (PDF/HQ).</li>
          <li>N√£o h√° armazenamento permanente de dados pessoais.</li>
          <li>Conte√∫do reflexivo e inspiracional (n√£o substitui aconselhamento cl√≠nico/profissional).</li>
        </ul>

        <label class="flex items-center gap-3 mt-6">
          <input id="chkTermo" type="checkbox" class="accent-primary-500 w-5 h-5">
          <span>Li e concordo com as orienta√ß√µes e o termo acima.</span>
        </label>

        <div class="mt-6">
          <button id="btnIniciar" class="btn-primary" disabled>Iniciar Jornada</button>
        </div>
      </div>
      
           <!-- Chama √∫nica no rodap√© do card -->
      <div class="chama-wrapper">
        <div class="chama chama-grande" aria-hidden="true"></div>
        <div class="chama chama-pequena" aria-hidden="true"></div>
      </div>
    </section>

    <!-- WIZARD -->
    <section id="sec-wizard" class="card mb-8 hidden">
      <div class="card-body pergaminho pergaminho-v">
        <header class="mb-6">
          <p id="wizardEtapa" class="font-semibold opacity-80">
            Pergunta <span id="etapaNum">1</span>/<span id="etapaTot">3</span>
          </p>
          <div class="progress"><div id="progressBar"></div></div>
        </header>

        <h2 id="perguntaTitulo" class="text-2xl font-extrabold mb-4"></h2>
        <input id="respostaInput" type="text" class="input" placeholder="Digite sua resposta" />

        <div class="mt-6 flex items-center justify-between gap-3">
          <button id="btnLimparAtual" class="btn-secondary">Limpar</button>
          <div class="flex gap-3">
            <button id="btnVoltar" class="btn-tertiary" disabled>Voltar</button>
            <button id="btnProxima" class="btn-primary" disabled>Pr√≥xima</button>
          </div>
        </div>        
      </div>

      <!-- Chama √∫nica no rodap√© do card -->
      <div class="chama-wrapper">
        <div class="chama chama-grande" aria-hidden="true"></div>
        <div class="chama chama-pequena" aria-hidden="true"></div>
      </div>
    </section>

    <!-- FINAL -->
<section id="sec-final" class="card mb-8 hidden">
  <div class="card-body pergaminho pergaminho-h text-center">
    <h2 class="text-2xl md:text-3xl font-extrabold mb-2">Parab√©ns! Voc√™ finalizou a jornada üéâ</h2>
    <p class="opacity-90 mb-6">Agora voc√™ pode gerar seu PDF e HQ com todas as respostas e reflex√µes.</p>

    <div class="flex flex-wrap justify-center gap-2">
      <button id="btn-download-all" type="button" class="btn btn-primary">Baixar PDF e HQ</button>
    </div>
  </div>

  <!-- Chama √∫nica no rodap√© do card -->
  <div class="chama-wrapper">
    <div class="chama chama-grande" aria-hidden="true"></div>
    <div class="chama chama-pequena" aria-hidden="true"></div>
  </div>
</section>

<script>
  // N√£o deixe o bot√£o submeter nada / redirecionar
  document.getElementById('btn-download-all')?.addEventListener('click', async (e) => {
    e.preventDefault();
    e.stopPropagation();

    const respostas = JSON.parse(localStorage.getItem('jornada_respostas') || '[]');
    const perfil    = JSON.parse(localStorage.getItem('jornada_perfil') || '{}');

    if (!respostas.length) {
      alert('Complete a jornada antes de baixar o PDF.');
      return;
    }

    // usa seu helper j√° existente
    await window.JORNADA_DOWNLOAD({ respostas, perfil });
  });
</script>
    
      <!-- Chama √∫nica no rodap√© do card -->
      <div class="chama-wrapper">
        <div class="chama chama-grande" aria-hidden="true"></div>
        <div class="chama chama-pequena" aria-hidden="true"></div>
      </div>
    </section>

    <footer class="text-center opacity-60 text-sm mt-10">Para al√©m. E sempre.</footer>
  </main>

  <!-- SCRIPTS (ordem importa!) -->
<script defer src="js/config.js"></script>    <!-- define window.JORNADA_CFG -->
<script defer src="js/state.js"></script>     <!-- define window.JSTATE e window.ST (shim) -->
<script defer src="js/questions.js"></script> <!-- define window.QUESTIONS -->
<script defer src="js/ui.js"></script>        <!-- define window.UI -->
<script defer src="js/chama.js"></script>     <!-- efeitos visuais -->
<script defer src="js/api.js"></script>       <!-- define window.JORNADA_DOWNLOAD -->
<script defer src="js/main.js"></script>      <!-- usa tudo acima -->
</body>
</html>
